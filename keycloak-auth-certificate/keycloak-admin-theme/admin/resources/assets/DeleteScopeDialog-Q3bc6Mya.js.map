{"version":3,"file":"DeleteScopeDialog-Q3bc6Mya.js","sources":["../../../../../../../src/clients/authorization/DeleteScopeDialog.tsx"],"sourcesContent":["import type ScopeRepresentation from \"@keycloak/keycloak-admin-client/lib/defs/scopeRepresentation\";\nimport { Alert, AlertVariant } from \"@patternfly/react-core\";\nimport { useTranslation } from \"react-i18next\";\nimport { useAdminClient } from \"../../admin-client\";\nimport { useAlerts } from \"@keycloak/keycloak-ui-shared\";\nimport { ConfirmDialogModal } from \"../../components/confirm-dialog/ConfirmDialog\";\nimport type { PermissionScopeRepresentation } from \"./Scopes\";\n\ntype DeleteScopeDialogProps = {\n  clientId: string;\n  selectedScope:\n    | PermissionScopeRepresentation\n    | ScopeRepresentation\n    | undefined;\n  refresh: () => void;\n  open: boolean;\n  toggleDialog: () => void;\n};\n\nexport const DeleteScopeDialog = ({\n  clientId,\n  selectedScope,\n  refresh,\n  open,\n  toggleDialog,\n}: DeleteScopeDialogProps) => {\n  const { adminClient } = useAdminClient();\n\n  const { t } = useTranslation();\n  const { addAlert, addError } = useAlerts();\n\n  return (\n    <ConfirmDialogModal\n      open={open}\n      toggleDialog={toggleDialog}\n      titleKey=\"deleteScope\"\n      continueButtonLabel=\"confirm\"\n      onConfirm={async () => {\n        try {\n          await adminClient.clients.delAuthorizationScope({\n            id: clientId,\n            scopeId: selectedScope?.id!,\n          });\n          addAlert(t(\"resourceScopeSuccess\"), AlertVariant.success);\n          refresh();\n        } catch (error) {\n          addError(\"resourceScopeError\", error);\n        }\n      }}\n    >\n      {t(\"deleteScopeConfirm\")}\n      {selectedScope &&\n        \"permissions\" in selectedScope &&\n        selectedScope.permissions &&\n        selectedScope.permissions.length > 0 && (\n          <Alert\n            variant=\"warning\"\n            isInline\n            isPlain\n            title={t(\"deleteScopeWarning\")}\n            className=\"pf-v5-u-pt-lg\"\n          >\n            <p className=\"pf-v5-u-pt-xs\">\n              {selectedScope.permissions.map((permission) => (\n                <strong key={permission.id} className=\"pf-v5-u-pr-md\">\n                  {permission.name}\n                </strong>\n              ))}\n            </p>\n          </Alert>\n        )}\n    </ConfirmDialogModal>\n  );\n};\n"],"names":["DeleteScopeDialog","clientId","selectedScope","refresh","open","toggleDialog","adminClient","useAdminClient","t","useTranslation","addAlert","addError","useAlerts","jsxs","ConfirmDialogModal","AlertVariant","error","jsx","Alert","permission"],"mappings":"4JAmBO,MAAMA,EAAoB,CAAC,CAChC,SAAAC,EACA,cAAAC,EACA,QAAAC,EACA,KAAAC,EACA,aAAAC,CACF,IAA8B,CACtB,KAAA,CAAE,YAAAC,GAAgBC,IAElB,CAAE,EAAAC,GAAMC,IACR,CAAE,SAAAC,EAAU,SAAAC,CAAS,EAAIC,EAAU,EAGvC,OAAAC,EAACC,EAAA,CACC,KAAAV,EACA,aAAAC,EACA,SAAS,cACT,oBAAoB,UACpB,UAAW,SAAY,CACjB,GAAA,CACI,MAAAC,EAAY,QAAQ,sBAAsB,CAC9C,GAAIL,EACJ,QAASC,GAAe,EAAA,CACzB,EACDQ,EAASF,EAAE,sBAAsB,EAAGO,EAAa,OAAO,EAChDZ,UACDa,EAAO,CACdL,EAAS,qBAAsBK,CAAK,CACtC,CACF,EAEC,SAAA,CAAAR,EAAE,oBAAoB,EACtBN,GACC,gBAAiBA,GACjBA,EAAc,aACdA,EAAc,YAAY,OAAS,GACjCe,EAACC,EAAA,CACC,QAAQ,UACR,SAAQ,GACR,QAAO,GACP,MAAOV,EAAE,oBAAoB,EAC7B,UAAU,gBAEV,WAAC,IAAE,CAAA,UAAU,gBACV,SAAcN,EAAA,YAAY,IAAKiB,GAC7BF,EAAA,SAAA,CAA2B,UAAU,gBACnC,SAAAE,EAAW,MADDA,EAAW,EAExB,CACD,EACH,CAAA,CACF,CAAA,CAAA,CAAA,CAIV"}