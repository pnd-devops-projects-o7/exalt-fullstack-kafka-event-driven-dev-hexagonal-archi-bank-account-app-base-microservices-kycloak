{"version":3,"file":"DetailOrganization-B2eYyNRD.js","sources":["../../../../../../../src/organizations/DetailOraganzationHeader.tsx","../../../../../../../src/organizations/IdentityProviderSelect.tsx","../../../../../../../src/organizations/LinkIdentityProviderModal.tsx","../../../../../../../src/organizations/IdentityProviders.tsx","../../../../../../../src/organizations/InviteMemberModal.tsx","../../../../../../../src/organizations/Members.tsx","../../../../../../../src/organizations/DetailOrganization.tsx"],"sourcesContent":["import { ButtonVariant, DropdownItem } from \"@patternfly/react-core\";\nimport { ViewHeader } from \"../components/view-header/ViewHeader\";\nimport { useTranslation } from \"react-i18next\";\nimport { useConfirmDialog } from \"../components/confirm-dialog/ConfirmDialog\";\nimport { useAdminClient } from \"../admin-client\";\nimport { useNavigate } from \"react-router-dom\";\nimport { useAlerts } from \"@keycloak/keycloak-ui-shared\";\nimport { Controller, useFormContext, useWatch } from \"react-hook-form\";\nimport { toOrganizations } from \"./routes/Organizations\";\nimport { useRealm } from \"../context/realm-context/RealmContext\";\n\ntype DetailOrganizationHeaderProps = {\n  save: () => void;\n};\n\nexport const DetailOrganizationHeader = ({\n  save,\n}: DetailOrganizationHeaderProps) => {\n  const { adminClient } = useAdminClient();\n  const { realm } = useRealm();\n  const navigate = useNavigate();\n\n  const { t } = useTranslation();\n  const { addAlert, addError } = useAlerts();\n\n  const id = useWatch({ name: \"id\" });\n  const name = useWatch({ name: \"name\" });\n\n  const { setValue } = useFormContext();\n\n  const [toggleDisableDialog, DisableConfirm] = useConfirmDialog({\n    titleKey: \"disableConfirmOrganizationTitle\",\n    messageKey: \"disableConfirmOrganization\",\n    continueButtonLabel: \"disable\",\n    onConfirm: () => {\n      setValue(\"enabled\", false);\n      save();\n    },\n  });\n\n  const [toggleDeleteDialog, DeleteConfirm] = useConfirmDialog({\n    titleKey: \"organizationDelete\",\n    messageKey: \"organizationDeleteConfirm\",\n    continueButtonLabel: \"delete\",\n    continueButtonVariant: ButtonVariant.danger,\n    onConfirm: async () => {\n      try {\n        await adminClient.organizations.delById({ id });\n        addAlert(t(\"organizationDeletedSuccess\"));\n        navigate(toOrganizations({ realm }));\n      } catch (error) {\n        addError(\"organizationDeleteError\", error);\n      }\n    },\n  });\n\n  return (\n    <Controller\n      name=\"enabled\"\n      render={({ field: { value, onChange } }) => (\n        <>\n          <DeleteConfirm />\n          <DisableConfirm />\n          <ViewHeader\n            titleKey={name || \"\"}\n            divider={false}\n            dropdownItems={[\n              <DropdownItem\n                data-testid=\"delete-client\"\n                key=\"delete\"\n                onClick={toggleDeleteDialog}\n              >\n                {t(\"delete\")}\n              </DropdownItem>,\n            ]}\n            isEnabled={value}\n            onToggle={(value) => {\n              if (!value) {\n                toggleDisableDialog();\n              } else {\n                onChange(value);\n                save();\n              }\n            }}\n          />\n        </>\n      )}\n    />\n  );\n};\n","import IdentityProviderRepresentation from \"@keycloak/keycloak-admin-client/lib/defs/identityProviderRepresentation\";\nimport { IdentityProvidersQuery } from \"@keycloak/keycloak-admin-client/lib/resources/identityProviders\";\nimport {\n  FormErrorText,\n  HelpItem,\n  useFetch,\n} from \"@keycloak/keycloak-ui-shared\";\nimport {\n  Button,\n  Chip,\n  ChipGroup,\n  FormGroup,\n  MenuToggle,\n  Select,\n  SelectList,\n  SelectOption,\n  TextInputGroup,\n  TextInputGroupMain,\n  TextInputGroupUtilities,\n} from \"@patternfly/react-core\";\nimport { TimesIcon } from \"@patternfly/react-icons\";\nimport { debounce } from \"lodash-es\";\nimport { useCallback, useRef, useState } from \"react\";\nimport { Controller, useFormContext } from \"react-hook-form\";\nimport { useTranslation } from \"react-i18next\";\nimport { useAdminClient } from \"../admin-client\";\nimport { ComponentProps } from \"../components/dynamic/components\";\nimport { KeycloakSpinner } from \"@keycloak/keycloak-ui-shared\";\nimport useToggle from \"../utils/useToggle\";\n\ntype IdentityProviderSelectProps = ComponentProps & {\n  variant?: \"typeaheadMulti\" | \"typeahead\";\n  isRequired?: boolean;\n};\n\nexport const IdentityProviderSelect = ({\n  name,\n  label,\n  helpText,\n  defaultValue,\n  isRequired,\n  variant = \"typeahead\",\n  isDisabled,\n}: IdentityProviderSelectProps) => {\n  const { adminClient } = useAdminClient();\n\n  const { t } = useTranslation();\n  const {\n    control,\n    getValues,\n    formState: { errors },\n  } = useFormContext();\n  const values: string[] | undefined = getValues(name!);\n\n  const [open, toggleOpen, setOpen] = useToggle();\n  const [inputValue, setInputValue] = useState(\"\");\n  const textInputRef = useRef<HTMLInputElement>();\n  const [idps, setIdps] = useState<\n    (IdentityProviderRepresentation | undefined)[]\n  >([]);\n  const [search, setSearch] = useState(\"\");\n\n  const debounceFn = useCallback(debounce(setSearch, 1000), []);\n\n  useFetch(\n    async () => {\n      const params: IdentityProvidersQuery = {\n        max: 20,\n        realmOnly: true,\n      };\n      if (search) {\n        params.search = search;\n      }\n\n      return await adminClient.identityProviders.find(params);\n    },\n    setIdps,\n    [search],\n  );\n\n  const convert = (\n    identityProviders: (IdentityProviderRepresentation | undefined)[],\n  ) => {\n    const options = identityProviders.map((option) => (\n      <SelectOption\n        key={option!.alias}\n        value={option}\n        selected={values?.includes(option!.alias!)}\n      >\n        {option!.alias}\n      </SelectOption>\n    ));\n    if (options.length === 0) {\n      return <SelectOption value=\"\">{t(\"noResultsFound\")}</SelectOption>;\n    }\n    return options;\n  };\n\n  if (!idps) {\n    return <KeycloakSpinner />;\n  }\n  return (\n    <FormGroup\n      label={t(label!)}\n      isRequired={isRequired}\n      labelIcon={\n        helpText ? (\n          <HelpItem helpText={helpText!} fieldLabelId={label!} />\n        ) : undefined\n      }\n      fieldId={name!}\n    >\n      <Controller\n        name={name!}\n        defaultValue={defaultValue}\n        control={control}\n        rules={{\n          validate: (value: string[]) =>\n            isRequired && value.filter((i) => i !== undefined).length === 0\n              ? t(\"required\")\n              : undefined,\n        }}\n        render={({ field }) => (\n          <Select\n            id={name!}\n            onOpenChange={toggleOpen}\n            toggle={(ref) => (\n              <MenuToggle\n                data-testid={name!}\n                ref={ref}\n                variant=\"typeahead\"\n                onClick={toggleOpen}\n                isExpanded={open}\n                isFullWidth\n                isDisabled={isDisabled}\n                status={errors[name!] ? \"danger\" : undefined}\n              >\n                <TextInputGroup isPlain>\n                  <TextInputGroupMain\n                    value={inputValue || field.value}\n                    onClick={toggleOpen}\n                    onChange={(_, value) => {\n                      setOpen(true);\n                      setInputValue(value);\n                      debounceFn(value);\n                    }}\n                    autoComplete=\"off\"\n                    innerRef={textInputRef}\n                    placeholderText={t(\"selectAUser\")}\n                    {...(field.value && {\n                      \"aria-activedescendant\": field.value,\n                    })}\n                    role=\"combobox\"\n                    isExpanded={open}\n                    aria-controls=\"select-create-typeahead-listbox\"\n                  >\n                    {variant === \"typeaheadMulti\" &&\n                      Array.isArray(field.value) && (\n                        <ChipGroup aria-label=\"Current selections\">\n                          {field.value.map(\n                            (selection: string, index: number) => (\n                              <Chip\n                                key={index}\n                                onClick={(ev) => {\n                                  ev.stopPropagation();\n                                  field.onChange(\n                                    field.value.filter(\n                                      (item: string) => item !== selection,\n                                    ),\n                                  );\n                                }}\n                              >\n                                {selection}\n                              </Chip>\n                            ),\n                          )}\n                        </ChipGroup>\n                      )}\n                  </TextInputGroupMain>\n                  <TextInputGroupUtilities>\n                    {!!search && (\n                      <Button\n                        variant=\"plain\"\n                        onClick={() => {\n                          setInputValue(\"\");\n                          setSearch(\"\");\n                          field.onChange([]);\n                          textInputRef?.current?.focus();\n                        }}\n                        aria-label={t(\"clear\")}\n                      >\n                        <TimesIcon aria-hidden />\n                      </Button>\n                    )}\n                  </TextInputGroupUtilities>\n                </TextInputGroup>\n              </MenuToggle>\n            )}\n            isOpen={open}\n            selected={field.value}\n            onSelect={(_, v) => {\n              const idp = v as IdentityProviderRepresentation;\n              const option = idp.alias!;\n              if (variant !== \"typeaheadMulti\") {\n                const removed = field.value.includes(option);\n\n                if (removed) {\n                  field.onChange([]);\n                } else {\n                  field.onChange([option]);\n                }\n\n                setInputValue(removed ? \"\" : option || \"\");\n                setOpen(false);\n              } else {\n                const changedValue = field.value.find(\n                  (v: string) => v === option,\n                )\n                  ? field.value.filter((v: string) => v !== option)\n                  : [...field.value, option];\n                field.onChange(changedValue);\n              }\n            }}\n            aria-label={t(name!)}\n          >\n            <SelectList>{convert(idps)}</SelectList>\n          </Select>\n        )}\n      />\n      {errors[name!] && <FormErrorText message={t(\"required\")} />}\n    </FormGroup>\n  );\n};\n","import IdentityProviderRepresentation from \"@keycloak/keycloak-admin-client/lib/defs/identityProviderRepresentation\";\nimport { FormSubmitButton, SelectControl } from \"@keycloak/keycloak-ui-shared\";\nimport {\n  Button,\n  ButtonVariant,\n  Form,\n  Modal,\n  ModalVariant,\n} from \"@patternfly/react-core\";\nimport { useEffect } from \"react\";\nimport { FormProvider, useForm, useFormContext } from \"react-hook-form\";\nimport { useTranslation } from \"react-i18next\";\nimport { useAdminClient } from \"../admin-client\";\nimport { DefaultSwitchControl } from \"../components/SwitchControl\";\nimport { useAlerts } from \"@keycloak/keycloak-ui-shared\";\nimport {\n  convertAttributeNameToForm,\n  convertFormValuesToObject,\n  convertToFormValues,\n} from \"../util\";\nimport { IdentityProviderSelect } from \"./IdentityProviderSelect\";\nimport { OrganizationFormType } from \"./OrganizationForm\";\n\ntype LinkIdentityProviderModalProps = {\n  orgId: string;\n  identityProvider?: IdentityProviderRepresentation;\n  onClose: () => void;\n};\n\ntype LinkRepresentation = {\n  alias: string[] | string;\n  hideOnLogin: boolean;\n  config: {\n    \"kc.org.domain\": string;\n  };\n};\n\nexport const LinkIdentityProviderModal = ({\n  orgId,\n  identityProvider,\n  onClose,\n}: LinkIdentityProviderModalProps) => {\n  const { adminClient } = useAdminClient();\n  const { t } = useTranslation();\n  const { addAlert, addError } = useAlerts();\n\n  const form = useForm<LinkRepresentation>({ mode: \"onChange\" });\n  const { handleSubmit, formState, setValue } = form;\n  const { getValues } = useFormContext<OrganizationFormType>();\n\n  useEffect(\n    () =>\n      convertToFormValues(\n        {\n          ...identityProvider,\n          alias: [identityProvider?.alias],\n          hideOnLogin: identityProvider?.hideOnLogin,\n        },\n        setValue,\n      ),\n    [],\n  );\n\n  const submitForm = async (data: LinkRepresentation) => {\n    try {\n      const foundIdentityProvider = await adminClient.identityProviders.findOne(\n        {\n          alias: data.alias[0],\n        },\n      );\n      if (!foundIdentityProvider) {\n        throw new Error(t(\"notFound\"));\n      }\n      const { config } = convertFormValuesToObject(data);\n      foundIdentityProvider.config = {\n        ...foundIdentityProvider.config,\n        ...config,\n      };\n      foundIdentityProvider.hideOnLogin = data.hideOnLogin;\n      await adminClient.identityProviders.update(\n        { alias: data.alias[0] },\n        foundIdentityProvider,\n      );\n\n      if (!identityProvider) {\n        await adminClient.organizations.linkIdp({\n          orgId,\n          alias: data.alias[0],\n        });\n      }\n      addAlert(\n        t(!identityProvider ? \"linkSuccessful\" : \"linkUpdatedSuccessful\"),\n      );\n      onClose();\n    } catch (error) {\n      addError(!identityProvider ? \"linkError\" : \"linkUpdatedError\", error);\n    }\n  };\n\n  return (\n    <Modal\n      variant={ModalVariant.small}\n      title={t(\"linkIdentityProvider\")}\n      isOpen\n      onClose={onClose}\n      actions={[\n        <FormSubmitButton\n          formState={formState}\n          data-testid=\"confirm\"\n          key=\"confirm\"\n          form=\"form\"\n          allowInvalid\n          allowNonDirty\n        >\n          {t(\"save\")}\n        </FormSubmitButton>,\n        <Button\n          id=\"modal-cancel\"\n          data-testid=\"cancel\"\n          key=\"cancel\"\n          variant={ButtonVariant.link}\n          onClick={onClose}\n        >\n          {t(\"cancel\")}\n        </Button>,\n      ]}\n    >\n      <FormProvider {...form}>\n        <Form id=\"form\" onSubmit={handleSubmit(submitForm)}>\n          <IdentityProviderSelect\n            name=\"alias\"\n            label={t(\"identityProvider\")}\n            defaultValue={[]}\n            isRequired\n            isDisabled={!!identityProvider}\n          />\n          <SelectControl\n            name={convertAttributeNameToForm(\"config.kc.org.domain\")}\n            label={t(\"domain\")}\n            controller={{ defaultValue: \"\" }}\n            options={[\n              { key: \"\", value: t(\"none\") },\n              ...getValues(\"domains\")!.map((d) => ({ key: d, value: d })),\n            ]}\n            menuAppendTo=\"parent\"\n          />\n          <DefaultSwitchControl\n            name=\"hideOnLogin\"\n            label={t(\"hideOnLoginPage\")}\n            labelIcon={t(\"hideOnLoginPageHelp\")}\n            defaultValue={true}\n          />\n          <DefaultSwitchControl\n            name={convertAttributeNameToForm(\n              \"config.kc.org.broker.redirect.mode.email-matches\",\n            )}\n            label={t(\"redirectWhenEmailMatches\")}\n            labelIcon={t(\"redirectWhenEmailMatchesHelp\")}\n            stringify\n          />\n        </Form>\n      </FormProvider>\n    </Modal>\n  );\n};\n","import IdentityProviderRepresentation from \"@keycloak/keycloak-admin-client/lib/defs/identityProviderRepresentation\";\nimport {\n  KeycloakDataTable,\n  ListEmptyState,\n  useAlerts,\n  useFetch,\n} from \"@keycloak/keycloak-ui-shared\";\nimport {\n  Button,\n  ButtonVariant,\n  PageSection,\n  Switch,\n  ToolbarItem,\n} from \"@patternfly/react-core\";\nimport { sortBy } from \"lodash-es\";\nimport { BellIcon } from \"@patternfly/react-icons\";\nimport { useState } from \"react\";\nimport { useTranslation } from \"react-i18next\";\nimport { useParams } from \"react-router-dom\";\nimport { useAdminClient } from \"../admin-client\";\nimport { useConfirmDialog } from \"../components/confirm-dialog/ConfirmDialog\";\nimport { ManageOrderDialog } from \"../identity-providers/ManageOrderDialog\";\nimport useToggle from \"../utils/useToggle\";\nimport { LinkIdentityProviderModal } from \"./LinkIdentityProviderModal\";\nimport { EditOrganizationParams } from \"./routes/EditOrganization\";\n\ntype ShownOnLoginPageCheckProps = {\n  row: IdentityProviderRepresentation;\n  refresh: () => void;\n};\n\nconst ShownOnLoginPageCheck = ({\n  row,\n  refresh,\n}: ShownOnLoginPageCheckProps) => {\n  const { adminClient } = useAdminClient();\n  const { addAlert, addError } = useAlerts();\n  const { t } = useTranslation();\n\n  const toggle = async (value: boolean) => {\n    try {\n      await adminClient.identityProviders.update(\n        { alias: row.alias! },\n        {\n          ...row,\n          hideOnLogin: value,\n        },\n      );\n      addAlert(t(\"linkUpdatedSuccessful\"));\n\n      refresh();\n    } catch (error) {\n      addError(\"linkUpdatedError\", error);\n    }\n  };\n\n  return (\n    <Switch\n      label={t(\"on\")}\n      labelOff={t(\"off\")}\n      isChecked={row.hideOnLogin}\n      onChange={(_, value) => toggle(value)}\n    />\n  );\n};\n\nexport const IdentityProviders = () => {\n  const { adminClient } = useAdminClient();\n  const { t } = useTranslation();\n  const { id: orgId } = useParams<EditOrganizationParams>();\n  const { addAlert, addError } = useAlerts();\n\n  const [key, setKey] = useState(0);\n  const refresh = () => setKey(key + 1);\n\n  const [manageDisplayDialog, setManageDisplayDialog] = useState(false);\n  const [hasProviders, setHasProviders] = useState(false);\n  const [selectedRow, setSelectedRow] =\n    useState<IdentityProviderRepresentation>();\n  const [open, toggleOpen] = useToggle();\n\n  useFetch(\n    async () => adminClient.identityProviders.find({ max: 1 }),\n    (providers) => {\n      setHasProviders(providers.length === 1);\n    },\n    [],\n  );\n\n  const loader = async () => {\n    const providers = await adminClient.organizations.listIdentityProviders({\n      orgId: orgId!,\n    });\n    return sortBy(providers, \"alias\");\n  };\n\n  const [toggleUnlinkDialog, UnlinkConfirm] = useConfirmDialog({\n    titleKey: \"identityProviderUnlink\",\n    messageKey: \"identityProviderUnlinkConfirm\",\n    continueButtonLabel: \"unLinkIdentityProvider\",\n    continueButtonVariant: ButtonVariant.danger,\n    onConfirm: async () => {\n      try {\n        await adminClient.organizations.unLinkIdp({\n          orgId: orgId!,\n          alias: selectedRow!.alias! as string,\n        });\n        setSelectedRow(undefined);\n        addAlert(t(\"unLinkSuccessful\"));\n        refresh();\n      } catch (error) {\n        addError(\"unLinkError\", error);\n      }\n    },\n  });\n\n  return (\n    <>\n      {manageDisplayDialog && (\n        <ManageOrderDialog\n          orgId={orgId!}\n          onClose={() => {\n            setManageDisplayDialog(false);\n            refresh();\n          }}\n        />\n      )}\n      <PageSection variant=\"light\">\n        <UnlinkConfirm />\n        {open && (\n          <LinkIdentityProviderModal\n            orgId={orgId!}\n            identityProvider={selectedRow}\n            onClose={() => {\n              toggleOpen();\n              refresh();\n            }}\n          />\n        )}\n        {!hasProviders ? (\n          <ListEmptyState\n            icon={BellIcon}\n            message={t(\"noIdentityProvider\")}\n            instructions={t(\"noIdentityProviderInstructions\")}\n          />\n        ) : (\n          <KeycloakDataTable\n            key={key}\n            loader={loader}\n            ariaLabelKey=\"identityProviders\"\n            searchPlaceholderKey=\"searchProvider\"\n            toolbarItem={\n              <>\n                <ToolbarItem>\n                  <Button\n                    onClick={() => {\n                      setSelectedRow(undefined);\n                      toggleOpen();\n                    }}\n                  >\n                    {t(\"linkIdentityProvider\")}\n                  </Button>\n                </ToolbarItem>\n                <ToolbarItem>\n                  <Button\n                    data-testid=\"manageDisplayOrder\"\n                    variant=\"link\"\n                    onClick={() => setManageDisplayDialog(true)}\n                  >\n                    {t(\"manageDisplayOrder\")}\n                  </Button>\n                </ToolbarItem>\n              </>\n            }\n            actions={[\n              {\n                title: t(\"edit\"),\n                onRowClick: (row) => {\n                  setSelectedRow(row);\n                  toggleOpen();\n                },\n              },\n              {\n                title: t(\"unLinkIdentityProvider\"),\n                onRowClick: (row) => {\n                  setSelectedRow(row);\n                  toggleUnlinkDialog();\n                },\n              },\n            ]}\n            columns={[\n              {\n                name: \"alias\",\n              },\n              {\n                name: \"config['kc.org.domain']\",\n                displayKey: \"domain\",\n              },\n              {\n                name: \"providerId\",\n                displayKey: \"providerDetails\",\n              },\n              {\n                name: \"hideOnLogin\",\n                displayKey: \"hideOnLoginPage\",\n                cellRenderer: (row) => (\n                  <ShownOnLoginPageCheck row={row} refresh={refresh} />\n                ),\n              },\n            ]}\n            emptyState={\n              <ListEmptyState\n                message={t(\"emptyIdentityProviderLink\")}\n                instructions={t(\"emptyIdentityProviderLinkInstructions\")}\n                primaryActionText={t(\"linkIdentityProvider\")}\n                onPrimaryAction={toggleOpen}\n              />\n            }\n          />\n        )}\n      </PageSection>\n    </>\n  );\n};\n","import { FormSubmitButton, TextControl } from \"@keycloak/keycloak-ui-shared\";\nimport {\n  Button,\n  ButtonVariant,\n  Form,\n  Modal,\n  ModalVariant,\n} from \"@patternfly/react-core\";\nimport { FormProvider, useForm } from \"react-hook-form\";\nimport { useTranslation } from \"react-i18next\";\nimport { useAdminClient } from \"../admin-client\";\nimport { useAlerts } from \"@keycloak/keycloak-ui-shared\";\n\ntype InviteMemberModalProps = {\n  orgId: string;\n  onClose: () => void;\n};\n\nexport const InviteMemberModal = ({\n  orgId,\n  onClose,\n}: InviteMemberModalProps) => {\n  const { adminClient } = useAdminClient();\n  const { addAlert, addError } = useAlerts();\n\n  const { t } = useTranslation();\n  const form = useForm<Record<string, string>>();\n  const { handleSubmit, formState } = form;\n\n  const submitForm = async (data: Record<string, string>) => {\n    try {\n      const formData = new FormData();\n      for (const key in data) {\n        formData.append(key, data[key]);\n      }\n      await adminClient.organizations.invite({ orgId }, formData);\n      addAlert(t(\"inviteSent\"));\n      onClose();\n    } catch (error) {\n      addError(\"inviteSentError\", error);\n    }\n  };\n\n  return (\n    <Modal\n      variant={ModalVariant.small}\n      title={t(\"inviteMember\")}\n      isOpen\n      onClose={onClose}\n      actions={[\n        <FormSubmitButton\n          formState={formState}\n          data-testid=\"save\"\n          key=\"confirm\"\n          form=\"form\"\n          allowInvalid\n          allowNonDirty\n        >\n          {t(\"send\")}\n        </FormSubmitButton>,\n        <Button\n          id=\"modal-cancel\"\n          data-testid=\"cancel\"\n          key=\"cancel\"\n          variant={ButtonVariant.link}\n          onClick={onClose}\n        >\n          {t(\"cancel\")}\n        </Button>,\n      ]}\n    >\n      <FormProvider {...form}>\n        <Form id=\"form\" onSubmit={handleSubmit(submitForm)}>\n          <TextControl\n            name=\"email\"\n            label={t(\"email\")}\n            rules={{ required: t(\"required\") }}\n            autoFocus\n          />\n          <TextControl name=\"firstName\" label={t(\"firstName\")} />\n          <TextControl name=\"lastName\" label={t(\"lastName\")} />\n        </Form>\n      </FormProvider>\n    </Modal>\n  );\n};\n","import UserRepresentation from \"@keycloak/keycloak-admin-client/lib/defs/userRepresentation\";\nimport {\n  Button,\n  Dropdown,\n  DropdownItem,\n  DropdownList,\n  MenuToggle,\n  PageSection,\n  ToolbarItem,\n} from \"@patternfly/react-core\";\nimport { useState } from \"react\";\nimport { useTranslation } from \"react-i18next\";\nimport { Link } from \"react-router-dom\";\nimport { useAdminClient } from \"../admin-client\";\nimport { useAlerts } from \"@keycloak/keycloak-ui-shared\";\nimport { ListEmptyState } from \"@keycloak/keycloak-ui-shared\";\nimport { KeycloakDataTable } from \"@keycloak/keycloak-ui-shared\";\nimport { useRealm } from \"../context/realm-context/RealmContext\";\nimport { MemberModal } from \"../groups/MembersModal\";\nimport { toUser } from \"../user/routes/User\";\nimport { useParams } from \"../utils/useParams\";\nimport useToggle from \"../utils/useToggle\";\nimport { InviteMemberModal } from \"./InviteMemberModal\";\nimport { EditOrganizationParams } from \"./routes/EditOrganization\";\n\nconst UserDetailLink = (user: any) => {\n  const { realm } = useRealm();\n  return (\n    <Link to={toUser({ realm, id: user.id!, tab: \"settings\" })}>\n      {user.username}\n    </Link>\n  );\n};\n\nexport const Members = () => {\n  const { t } = useTranslation();\n  const { adminClient } = useAdminClient();\n  const { id: orgId } = useParams<EditOrganizationParams>();\n  const { addAlert, addError } = useAlerts();\n\n  const [key, setKey] = useState(0);\n  const refresh = () => setKey(key + 1);\n\n  const [open, toggle] = useToggle();\n  const [openAddMembers, toggleAddMembers] = useToggle();\n  const [openInviteMembers, toggleInviteMembers] = useToggle();\n  const [selectedMembers, setSelectedMembers] = useState<UserRepresentation[]>(\n    [],\n  );\n\n  const loader = (first?: number, max?: number, search?: string) =>\n    adminClient.organizations.listMembers({ orgId, first, max, search });\n\n  const removeMember = async (selectedMembers: UserRepresentation[]) => {\n    try {\n      await Promise.all(\n        selectedMembers.map((user) =>\n          adminClient.organizations.delMember({\n            orgId,\n            userId: user.id!,\n          }),\n        ),\n      );\n      addAlert(t(\"organizationUsersLeft\", { count: selectedMembers.length }));\n    } catch (error) {\n      addError(\"organizationUsersLeftError\", error);\n    }\n\n    refresh();\n  };\n  return (\n    <PageSection variant=\"light\">\n      {openAddMembers && (\n        <MemberModal\n          membersQuery={() => adminClient.organizations.listMembers({ orgId })}\n          onAdd={async (selectedRows) => {\n            try {\n              await Promise.all(\n                selectedRows.map((user) =>\n                  adminClient.organizations.addMember({\n                    orgId,\n                    userId: user.id!,\n                  }),\n                ),\n              );\n              addAlert(\n                t(\"organizationUsersAdded\", { count: selectedRows.length }),\n              );\n            } catch (error) {\n              addError(\"organizationUsersAddedError\", error);\n            }\n          }}\n          onClose={() => {\n            toggleAddMembers();\n            refresh();\n          }}\n        />\n      )}\n      {openInviteMembers && (\n        <InviteMemberModal orgId={orgId} onClose={toggleInviteMembers} />\n      )}\n      <KeycloakDataTable\n        key={key}\n        loader={loader}\n        isPaginated\n        ariaLabelKey=\"membersList\"\n        searchPlaceholderKey=\"searchMember\"\n        onSelect={(members) => setSelectedMembers([...members])}\n        canSelectAll\n        toolbarItem={\n          <>\n            <ToolbarItem>\n              <Dropdown\n                onOpenChange={toggle}\n                toggle={(ref) => (\n                  <MenuToggle\n                    ref={ref}\n                    onClick={toggle}\n                    isExpanded={open}\n                    variant=\"primary\"\n                  >\n                    {t(\"addMember\")}\n                  </MenuToggle>\n                )}\n                isOpen={open}\n              >\n                <DropdownList>\n                  <DropdownItem\n                    onClick={() => {\n                      toggleAddMembers();\n                      toggle();\n                    }}\n                  >\n                    {t(\"addRealmUser\")}\n                  </DropdownItem>\n                  <DropdownItem\n                    onClick={() => {\n                      toggleInviteMembers();\n                      toggle();\n                    }}\n                  >\n                    {t(\"inviteMember\")}\n                  </DropdownItem>\n                </DropdownList>\n              </Dropdown>\n            </ToolbarItem>\n            <ToolbarItem>\n              <Button\n                variant=\"plain\"\n                isDisabled={selectedMembers.length === 0}\n                onClick={() => removeMember(selectedMembers)}\n              >\n                {t(\"removeMember\")}\n              </Button>\n            </ToolbarItem>\n          </>\n        }\n        actions={[\n          {\n            title: t(\"remove\"),\n            onRowClick: async (member) => {\n              await removeMember([member]);\n            },\n          },\n        ]}\n        columns={[\n          {\n            name: \"username\",\n            cellRenderer: UserDetailLink,\n          },\n          {\n            name: \"email\",\n          },\n          {\n            name: \"firstName\",\n          },\n          {\n            name: \"lastName\",\n          },\n        ]}\n        emptyState={\n          <ListEmptyState\n            message={t(\"emptyMembers\")}\n            instructions={t(\"emptyMembersInstructions\")}\n            secondaryActions={[\n              {\n                text: t(\"addRealmUser\"),\n                onClick: toggleAddMembers,\n              },\n              {\n                text: t(\"inviteMember\"),\n                onClick: toggleInviteMembers,\n              },\n            ]}\n          />\n        }\n      />\n    </PageSection>\n  );\n};\n","import {\n  FormSubmitButton,\n  useAlerts,\n  useFetch,\n} from \"@keycloak/keycloak-ui-shared\";\nimport {\n  ActionGroup,\n  Button,\n  PageSection,\n  Tab,\n  TabTitleText,\n} from \"@patternfly/react-core\";\nimport { FormProvider, useForm } from \"react-hook-form\";\nimport { useTranslation } from \"react-i18next\";\nimport { useAdminClient } from \"../admin-client\";\nimport { FormAccess } from \"../components/form/FormAccess\";\nimport { AttributesForm } from \"../components/key-value-form/AttributeForm\";\nimport { arrayToKeyValue } from \"../components/key-value-form/key-value-convert\";\nimport {\n  RoutableTabs,\n  useRoutableTab,\n} from \"../components/routable-tabs/RoutableTabs\";\nimport { useRealm } from \"../context/realm-context/RealmContext\";\nimport { useParams } from \"../utils/useParams\";\nimport { DetailOrganizationHeader } from \"./DetailOraganzationHeader\";\nimport { IdentityProviders } from \"./IdentityProviders\";\nimport { Members } from \"./Members\";\nimport {\n  OrganizationForm,\n  OrganizationFormType,\n  convertToOrg,\n} from \"./OrganizationForm\";\nimport {\n  EditOrganizationParams,\n  OrganizationTab,\n  toEditOrganization,\n} from \"./routes/EditOrganization\";\n\nexport default function DetailOrganization() {\n  const { adminClient } = useAdminClient();\n  const { addAlert, addError } = useAlerts();\n\n  const { realm } = useRealm();\n  const { id } = useParams<EditOrganizationParams>();\n  const { t } = useTranslation();\n\n  const form = useForm<OrganizationFormType>();\n\n  const save = async (org: OrganizationFormType) => {\n    try {\n      const organization = convertToOrg(org);\n      await adminClient.organizations.updateById({ id }, organization);\n      addAlert(t(\"organizationSaveSuccess\"));\n    } catch (error) {\n      addError(\"organizationSaveError\", error);\n    }\n  };\n\n  useFetch(\n    () => adminClient.organizations.findOne({ id }),\n    (org) => {\n      if (!org) {\n        throw new Error(t(\"notFound\"));\n      }\n      form.reset({\n        ...org,\n        domains: org.domains?.map((d) => d.name),\n        attributes: arrayToKeyValue(org.attributes),\n      });\n    },\n    [id],\n  );\n\n  const useTab = (tab: OrganizationTab) =>\n    useRoutableTab(\n      toEditOrganization({\n        realm,\n        id,\n        tab,\n      }),\n    );\n\n  const settingsTab = useTab(\"settings\");\n  const attributesTab = useTab(\"attributes\");\n  const membersTab = useTab(\"members\");\n  const identityProvidersTab = useTab(\"identityProviders\");\n\n  return (\n    <PageSection variant=\"light\" className=\"pf-v5-u-p-0\">\n      <FormProvider {...form}>\n        <DetailOrganizationHeader save={() => save(form.getValues())} />\n        <RoutableTabs\n          data-testid=\"organization-tabs\"\n          aria-label={t(\"organization\")}\n          isBox\n          mountOnEnter\n        >\n          <Tab\n            id=\"settings\"\n            data-testid=\"settingsTab\"\n            title={<TabTitleText>{t(\"settings\")}</TabTitleText>}\n            {...settingsTab}\n          >\n            <PageSection>\n              <FormAccess\n                role=\"anyone\"\n                onSubmit={form.handleSubmit(save)}\n                isHorizontal\n              >\n                <OrganizationForm readOnly />\n                <ActionGroup>\n                  <FormSubmitButton\n                    formState={form.formState}\n                    data-testid=\"save\"\n                  >\n                    {t(\"save\")}\n                  </FormSubmitButton>\n                  <Button\n                    onClick={() => form.reset()}\n                    data-testid=\"reset\"\n                    variant=\"link\"\n                  >\n                    {t(\"reset\")}\n                  </Button>\n                </ActionGroup>\n              </FormAccess>\n            </PageSection>\n          </Tab>\n          <Tab\n            id=\"attributes\"\n            data-testid=\"attributeTab\"\n            title={<TabTitleText>{t(\"attributes\")}</TabTitleText>}\n            {...attributesTab}\n          >\n            <PageSection variant=\"light\">\n              <AttributesForm\n                form={form}\n                save={save}\n                reset={() =>\n                  form.reset({\n                    ...form.getValues(),\n                  })\n                }\n                name=\"attributes\"\n              />\n            </PageSection>\n          </Tab>\n          <Tab\n            id=\"members\"\n            data-testid=\"membersTab\"\n            title={<TabTitleText>{t(\"members\")}</TabTitleText>}\n            {...membersTab}\n          >\n            <Members />\n          </Tab>\n          <Tab\n            id=\"identityProviders\"\n            data-testid=\"identityProvidersTab\"\n            title={<TabTitleText>{t(\"identityProviders\")}</TabTitleText>}\n            {...identityProvidersTab}\n          >\n            <IdentityProviders />\n          </Tab>\n        </RoutableTabs>\n      </FormProvider>\n    </PageSection>\n  );\n}\n"],"names":["DetailOrganizationHeader","save","adminClient","useAdminClient","realm","useRealm","navigate","useNavigate","t","useTranslation","addAlert","addError","useAlerts","id","useWatch","name","setValue","useFormContext","toggleDisableDialog","DisableConfirm","useConfirmDialog","toggleDeleteDialog","DeleteConfirm","ButtonVariant","toOrganizations","error","jsx","Controller","value","onChange","jsxs","Fragment","ViewHeader","DropdownItem","IdentityProviderSelect","label","helpText","defaultValue","isRequired","variant","isDisabled","control","getValues","errors","values","open","toggleOpen","setOpen","useToggle","inputValue","setInputValue","useState","textInputRef","useRef","idps","setIdps","search","setSearch","debounceFn","useCallback","debounce","useFetch","params","convert","identityProviders","options","option","SelectOption","FormGroup","HelpItem","i","field","Select","ref","MenuToggle","TextInputGroup","TextInputGroupMain","_","ChipGroup","selection","index","Chip","ev","item","TextInputGroupUtilities","Button","TimesIcon","v","removed","changedValue","SelectList","FormErrorText","KeycloakSpinner","LinkIdentityProviderModal","orgId","identityProvider","onClose","form","useForm","handleSubmit","formState","useEffect","convertToFormValues","submitForm","data","foundIdentityProvider","config","convertFormValuesToObject","Modal","ModalVariant","FormSubmitButton","FormProvider","Form","SelectControl","convertAttributeNameToForm","d","DefaultSwitchControl","ShownOnLoginPageCheck","row","refresh","toggle","Switch","IdentityProviders","useParams","key","setKey","manageDisplayDialog","setManageDisplayDialog","hasProviders","setHasProviders","selectedRow","setSelectedRow","providers","loader","sortBy","toggleUnlinkDialog","UnlinkConfirm","ManageOrderDialog","PageSection","KeycloakDataTable","ToolbarItem","ListEmptyState","BellIcon","InviteMemberModal","formData","TextControl","UserDetailLink","user","Link","toUser","Members","openAddMembers","toggleAddMembers","openInviteMembers","toggleInviteMembers","selectedMembers","setSelectedMembers","first","max","removeMember","MemberModal","selectedRows","members","Dropdown","DropdownList","member","DetailOrganization","org","organization","convertToOrg","arrayToKeyValue","useTab","tab","useRoutableTab","toEditOrganization","settingsTab","attributesTab","membersTab","identityProvidersTab","RoutableTabs","Tab","TabTitleText","FormAccess","OrganizationForm","ActionGroup","AttributesForm"],"mappings":"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"}