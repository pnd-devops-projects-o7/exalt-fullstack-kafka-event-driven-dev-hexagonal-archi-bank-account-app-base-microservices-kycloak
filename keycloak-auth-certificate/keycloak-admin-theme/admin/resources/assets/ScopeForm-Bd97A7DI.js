import{jsx as a,jsxs as l,Fragment as T}from"react/jsx-runtime";import{useEffect as V}from"react";import{a as k,j as E,d as L,bB as O,bC as A,bD as j,I as g,bE as t,n as q,m as N,Q as c,bn as S,W as h,A as P,ap as W,f as B,L as Q,bq as R}from"./main-C047jAp3.js";import{g as $}from"./utils-C-TUnOch.js";import{D as i}from"./SwitchControl-87mhceN2.js";import{b as F}from"./ClientScopeTypes-Cr5mTApE.js";import{F as w}from"./FormAccess-CEFqBG2E.js";const Z=({clientScope:o,save:I})=>{const{t:e}=k(),r=E({mode:"onChange"}),{control:m,handleSubmit:v,setValue:u,formState:p}=r,{isDirty:x,isValid:H}=p,{realm:C}=L(),d=O(),b=A()(j.DynamicScopes),y=g({control:m,name:t("attributes.display.on.consent.screen"),defaultValue:o?.attributes?.["display.on.consent.screen"]??"true"}),D=g({control:m,name:t("attributes.is.dynamic.scope"),defaultValue:"false"}),f=(n,s)=>u(t("attributes.dynamic.scope.regexp"),s?`${n}:*`:n,{shouldDirty:!0});return V(()=>{q(o??{},u)},[o]),a(w,{role:"manage-clients",onSubmit:v(I),isHorizontal:!0,children:l(N,{...r,children:[a(c,{name:"name",label:e("name"),labelIcon:e("scopeNameHelp"),rules:{required:{value:!0,message:e("required")},onChange:n=>{b&&f(n.target.validated,!0)}}}),b&&l(T,{children:[a(i,{name:t("attributes.is.dynamic.scope"),label:e("dynamicScope"),labelIcon:e("dynamicScopeHelp"),onChange:(n,s)=>{f(s&&r.getValues("name")||"",s)},stringify:!0}),D==="true"&&a(c,{name:t("attributes.dynamic.scope.regexp"),label:e("dynamicScopeFormat"),labelIcon:e("dynamicScopeFormatHelp"),isDisabled:!0})]}),a(S,{name:"description",label:e("description"),labelIcon:e("scopeDescriptionHelp"),rules:{maxLength:{value:255,message:e("maxLength")}}}),a(h,{id:"kc-type",name:"type",label:e("type"),labelIcon:e("scopeTypeHelp"),controller:{defaultValue:F[0]},options:F.map(n=>({key:n,value:e(`clientScopeType.${n}`)}))}),!o&&a(h,{id:"kc-protocol",name:"protocol",label:e("protocol"),labelIcon:e("protocolHelp"),controller:{defaultValue:d[0]},options:d.map(n=>({key:n,value:$(e,n)}))}),a(i,{name:t("attributes.display.on.consent.screen"),defaultValue:y,label:e("displayOnConsentScreen"),labelIcon:e("displayOnConsentScreenHelp"),stringify:!0}),y==="true"&&a(S,{name:t("attributes.consent.screen.text"),label:e("consentScreenText"),labelIcon:e("consentScreenTextHelp")}),a(i,{name:t("attributes.include.in.token.scope"),label:e("includeInTokenScope"),labelIcon:e("includeInTokenScopeHelp"),stringify:!0}),a(c,{name:t("attributes.gui.order"),label:e("guiOrder"),labelIcon:e("guiOrderHelp"),type:"number",min:0}),l(P,{children:[a(W,{formState:p,disabled:!x||!H,children:e("save")}),a(B,{variant:"link",component:n=>a(Q,{...n,to:R({realm:C})}),children:e("cancel")})]})]})})};export{Z as S};
//# sourceMappingURL=ScopeForm-Bd97A7DI.js.map
