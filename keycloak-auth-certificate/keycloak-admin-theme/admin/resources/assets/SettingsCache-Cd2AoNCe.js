import{jsxs as h,Fragment as y,jsx as e}from"react/jsx-runtime";import{u as M,a as A,c as P,b as S,$ as K,d as O,Y as W,B as $,p as w,eZ as Y,N as p,D as U,ax as z,E as B,G as q,I as R,J as b,K as T,c6 as V,c7 as k,ai as i,W as X,a2 as j}from"./main-C047jAp3.js";import{u as F}from"./ConfirmDialog-d09hGFUk.js";import{V as H}from"./ViewHeader-Y2Z8ln-o.js";import{F as G}from"./FormAccess-CEFqBG2E.js";import{u as x}from"./useToggle-K3Kx99tM.js";import{i as D}from"./isEqual-deZv8OsO.js";const le=({provider:t,save:a,noDivider:l=!1,dropdownItems:r=[]})=>{const{adminClient:s}=M(),{t:u}=A(),{id:f}=P(),C=S(),{addAlert:d,addError:E}=K(),{realm:g}=O(),{control:I,setValue:m}=W(),[n,o]=F({titleKey:"userFedDisableConfirmTitle",messageKey:"userFedDisableConfirm",continueButtonLabel:"disable",onConfirm:()=>{m("config.enabled[0]","false"),a()}}),[L,v]=F({titleKey:"userFedDeleteConfirmTitle",messageKey:"userFedDeleteConfirm",continueButtonLabel:"delete",continueButtonVariant:$.danger,onConfirm:async()=>{try{await s.components.del({id:f}),d(u("userFedDeletedSuccess"),w.success),C(Y({realm:g}),{replace:!0})}catch(c){E("userFedDeleteError",c)}}});return h(y,{children:[e(o,{}),e(v,{}),e(p,{name:"config.enabled",defaultValue:["true"],control:I,render:({field:c})=>f?e(H,{divider:!l,titleKey:t,dropdownItems:[...r,e(U,{onClick:()=>L(),"data-testid":"delete-cmd",children:u("deleteProvider")},"delete")],isEnabled:c.value?.[0]==="true"||c.value==="true",onToggle:_=>{_?(c.onChange([_.toString()]),a()):n()}}):e(H,{titleKey:u("addProvider",{provider:t,count:1})})})]})},J=({title:t,description:a,showDescription:l=!1})=>h(y,{children:[e(z,{size:"xl",headingLevel:"h2",className:l?"kc-wizard-section-header__title--has-description":"kc-wizard-section-header__title",children:t}),l&&e(B,{className:"kc-wizard-section-header__description",children:e(q,{children:a})})]}),N=({form:t})=>{const{t:a}=A(),[l,r]=x(),[s,u]=x(),[f,C]=x(),d=R({control:t.control,name:"config.cachePolicy"}),E=[e(i,{value:["0"],children:["00"]},0)];let g="";for(let n=1;n<24;n++)n<10?g=`0${n}`:g=`${n}`,E.push(e(i,{value:[`${n}`],children:g},n));const I=[e(i,{value:["0"],children:["00"]},0)];let m="";for(let n=1;n<60;n++)n<10?m=`0${n}`:m=`${n}`,I.push(e(i,{value:[`${n}`],children:m},n));return h(y,{children:[e(b,{label:a("cachePolicy"),labelIcon:e(T,{helpText:a("cachePolicyHelp"),fieldLabelId:"cachePolicy"}),fieldId:"kc-cache-policy",children:e(p,{name:"config.cachePolicy",defaultValue:["DEFAULT"],control:t.control,render:({field:n})=>h(V,{toggleId:"kc-cache-policy",onToggle:r,isOpen:l,onSelect:o=>{n.onChange(o),r()},selections:n.value,variant:k.single,"data-testid":"kerberos-cache-policy","aria-label":a("selectCachePolicy"),children:[e(i,{value:["DEFAULT"],children:"DEFAULT"},0),e(i,{value:["EVICT_DAILY"],children:"EVICT_DAILY"},1),e(i,{value:["EVICT_WEEKLY"],children:"EVICT_WEEKLY"},2),e(i,{value:["MAX_LIFESPAN"],children:"MAX_LIFESPAN"},3),e(i,{value:["NO_CACHE"],children:"NO_CACHE"},4)]})})}),D(d,["EVICT_WEEKLY"])?e(X,{id:"kc-eviction-day",name:"config.evictionDay[0]",label:a("evictionDay"),labelIcon:a("evictionDayHelp"),controller:{defaultValue:"1"},"aria-label":a("selectEvictionDay"),options:[{key:"1",value:a("Sunday")},{key:"2",value:a("Monday")},{key:"3",value:a("Tuesday")},{key:"4",value:a("Wednesday")},{key:"5",value:a("Thursday")},{key:"6",value:a("Friday")},{key:"7",value:a("Saturday")}]}):null,D(d,["EVICT_DAILY"])||D(d,["EVICT_WEEKLY"])?h(y,{children:[e(b,{label:a("evictionHour"),labelIcon:e(T,{helpText:a("evictionHourHelp"),fieldLabelId:"evictionHour"}),isRequired:!0,fieldId:"kc-eviction-hour",children:e(p,{name:"config.evictionHour",defaultValue:["0"],control:t.control,render:({field:n})=>e(V,{toggleId:"kc-eviction-hour",onToggle:u,isOpen:s,onSelect:o=>{n.onChange(o),u()},selections:n.value,variant:k.single,"aria-label":a("selectEvictionHour"),children:E})})}),e(b,{label:a("evictionMinute"),labelIcon:e(T,{helpText:a("evictionMinuteHelp"),fieldLabelId:"evictionMinute"}),isRequired:!0,fieldId:"kc-eviction-minute",children:e(p,{name:"config.evictionMinute",defaultValue:["0"],control:t.control,render:({field:n})=>e(V,{toggleId:"kc-eviction-minute",onToggle:C,isOpen:f,onSelect:o=>{n.onChange(o),C()},selections:n.value,variant:k.single,"aria-label":a("selectEvictionMinute"),children:I})})})]}):null,D(d,["MAX_LIFESPAN"])?e(b,{label:a("maxLifespan"),labelIcon:e(T,{helpText:a("maxLifespanHelp"),fieldLabelId:"maxLifespan"}),fieldId:"kc-max-lifespan",children:e(p,{name:"config.maxLifespan[0]",defaultValue:0,control:t.control,render:({field:n})=>{const L=v=>n.onChange(Math.max(v,0));return e(j,{id:"kc-max-lifespan","data-testid":"kerberos-cache-lifespan",value:n.value,min:0,unit:a("ms"),type:"text",onPlus:()=>n.onChange(Number(n.value)+1),onMinus:()=>n.onChange(Number(n.value)-1),onChange:v=>{const c=Number(v.currentTarget.value);L(isNaN(c)?0:c)}})}})}):null]})},oe=({form:t,showSectionHeading:a=!1,showSectionDescription:l=!1,unWrap:r=!1})=>{const{t:s}=A();return h(y,{children:[a&&e(J,{title:s("cacheSettings"),description:s("cacheSettingsDescription"),showDescription:l}),r?e(N,{form:t}):e(G,{role:"manage-realm",isHorizontal:!0,children:e(N,{form:t})})]})};export{le as H,oe as S,J as W};
//# sourceMappingURL=SettingsCache-Cd2AoNCe.js.map
