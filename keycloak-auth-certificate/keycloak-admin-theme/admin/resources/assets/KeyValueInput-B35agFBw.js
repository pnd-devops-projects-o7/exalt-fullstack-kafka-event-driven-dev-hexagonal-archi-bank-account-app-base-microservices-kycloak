import{jsx as e,jsxs as n,Fragment as x}from"react/jsx-runtime";import{useState as N,useMemo as q,Fragment as F}from"react";import{a as b,bW as T,c6 as P,ai as w,a0 as m,Y as G,b$ as O,I as j,cx as B,cy as d,d2 as $,d3 as g,f as v,a3 as H,ab as I,a8 as L,ac as M,ad as R}from"./main-C047jAp3.js";import{K as W,A as z,a as K}from"./KeySelect-DvFB2tXI.js";const U=({selectItems:t,keyValue:c,...l})=>{const{t:s}=b(),{field:r}=T(l),[u,i]=N(!1),p=q(()=>t.find(a=>a.key===c),[t,c]);return p?.values?e(P,{onToggle:a=>i(a),isOpen:u,onSelect:a=>{r.onChange(a),i(!1)},selections:r.value?[r.value]:s("choose"),placeholderText:s("valuePlaceholder"),children:p.values.map(a=>e(w,{value:a,children:a},a))}):e(m,{"aria-label":s("customValue"),"data-testid":l.name,...r})},X=({name:t,label:c="attributes",defaultKeyValue:l,isDisabled:s=!1})=>{const{t:r}=b(),{control:u,register:i,formState:{errors:p}}=G(),{fields:a,append:S,remove:A}=O({shouldUnregister:!0,control:u,name:t}),f=()=>S({key:"",value:""}),C=j({name:t,control:u,defaultValue:[]});return a.length>0?n(x,{children:[n(B,{hasGutter:!0,children:[e(d,{className:"pf-v5-c-form__label",span:5,children:e("span",{className:"pf-v5-c-form__label-text",children:r("key")})}),e(d,{className:"pf-v5-c-form__label",span:7,children:e("span",{className:"pf-v5-c-form__label-text",children:r("value")})}),a.map((E,o)=>{const h=p[t]?.[o],k=!!h?.key,y=!!h?.value||!!h?.message,_=h?.message||r("valueError");return n(F,{children:[n(d,{span:5,children:[l?e(W,{name:`${t}.${o}.key`,selectItems:l,rules:{required:!0}}):e(m,{placeholder:r("keyPlaceholder"),"aria-label":r("key"),"data-testid":`${t}-key`,...i(`${t}.${o}.key`,{required:!0}),validated:k?"error":"default",isRequired:!0,isDisabled:s}),k&&e($,{children:e(g,{variant:"error",children:r("keyError")})})]}),n(d,{span:5,children:[l?e(U,{name:`${t}.${o}.value`,keyValue:C[o]?.key,selectItems:l,rules:{required:!0}}):e(m,{placeholder:r("valuePlaceholder"),"aria-label":r("value"),"data-testid":`${t}-value`,...i(`${t}.${o}.value`,{required:!0}),validated:y?"error":"default",isRequired:!0,isDisabled:s}),y&&e($,{children:e(g,{variant:"error",children:_})})]}),e(d,{span:2,children:e(v,{variant:"link",title:r("removeAttribute"),onClick:()=>A(o),"data-testid":`${t}-remove`,isDisabled:s,children:e(H,{})})})]},E.id)})]}),e(z,{children:e(K,{children:e(v,{"data-testid":`${t}-add-row`,className:"pf-v5-u-px-0 pf-v5-u-mt-sm",variant:"link",icon:e(I,{}),onClick:f,isDisabled:s,children:r("addAttribute",{label:c})})})})]}):n(L,{"data-testid":`${t}-empty-state`,className:"pf-v5-u-p-0",variant:"xs",children:[e(M,{children:r("missingAttributes",{label:c})}),e(R,{children:e(v,{"data-testid":`${t}-add-row`,variant:"link",icon:e(I,{}),size:"sm",onClick:f,isDisabled:s,children:r("addAttribute",{label:c})})})]})};export{X as K};
//# sourceMappingURL=KeyValueInput-B35agFBw.js.map
