import{jsx as r,jsxs as g}from"react/jsx-runtime";import{u as M,a as T,$ as B,C as P,x as I,M as N,l as S,f as u,B as k,E as A,G as E}from"./main-C047jAp3.js";import{useState as c}from"react";import{s as j}from"./sortBy-o2QtVcO3.js";import{c as w,d as F,a as V,b as W,D as $}from"./Droppable-BCYJDQYz.js";import{d as z,D as G,a as H,b as R,c as q}from"./DataListItemRow-BUcm7LGX.js";const Z=({orgId:m,hideRealmBasedIdps:h=!1,onClose:l})=>{const{adminClient:d}=M(),{t:e}=T(),{addAlert:f,addError:v}=B(),[C,s]=c(""),[p,x]=c(),[n,D]=c([]),L=({index:a})=>(s(e("onDragStart",{item:n[a]})),!0),b=({index:a})=>{s(e("onDragMove",{item:n[a]}))},O=(a,t)=>{if(t){const i=[...n],[o]=i.splice(a.index,1);return i.splice(t.index,0,o),s(e("onDragFinish",{list:i})),D(i),!0}else return s(e("onDragCancel")),!1};return P(()=>m?d.organizations.listIdentityProviders({orgId:m}):d.identityProviders.find({realmOnly:h}),a=>{x(a),D(j(a,["config.guiOrder","alias"]).map(t=>t.alias))},[]),p?g(N,{variant:S.small,title:e("manageDisplayOrder"),isOpen:!0,onClose:l,actions:[r(u,{id:"modal-confirm","data-testid":"confirm",onClick:async()=>{const a=n.map((t,i)=>{const o=p.find(y=>y.alias===t);return o.config.guiOrder=i,d.identityProviders.update({alias:t},o)});try{await Promise.all(a),f(e("orderChangeSuccess"))}catch(t){v("orderChangeError",t)}l()},children:e("save")},"confirm"),r(u,{id:"modal-cancel","data-testid":"cancel",variant:k.link,onClick:l,children:e("cancel")},"cancel")],children:[r(A,{className:"pf-v5-u-pb-lg",children:r(E,{children:e("orderDialogIntro")})}),r(w,{onDrag:L,onDragMove:b,onDrop:O,children:r(F,{hasNoWrapper:!0,children:r(z,{"aria-label":e("manageOrderTableAria"),"data-testid":"manageOrderDataList",isCompact:!0,children:n.map(a=>r(V,{hasNoWrapper:!0,children:r(G,{"aria-label":a,id:a,children:g(H,{children:[r(W,{children:r($,{"aria-label":e("dragHelp")})}),r(R,{dataListCells:[r(q,{"data-testid":a,children:a},a)]})]})})},a))})})}),r("div",{className:"pf-v5-screen-reader","aria-live":"assertive",children:C})]}):r(I,{})};export{Z as M};
//# sourceMappingURL=ManageOrderDialog-922B-N3z.js.map
