import{jsx as t,jsxs as f}from"react/jsx-runtime";import{u as j,a as v,j as k,d as E,$ as F,C as O,P as R,F as w,m as x,A as D,f as p,L as _,i as B}from"./main-C047jAp3.js";import{useState as H}from"react";import{D as I}from"./DynamicComponents-CCNvrlYx.js";import{u as L}from"./useParams-6mfeCu18.js";import{T as u}from"./constants-BclHbWtx.js";const q=({id:g,providerType:c,page:{id:o,...P}})=>{const{adminClient:r}=j(),{t:n}=v(),m=k(),{realm:h,realmRepresentation:y}=E(),{addAlert:S,addError:b}=F(),[i,d]=H(g),l=L();O(async()=>await Promise.all([i?r.components.findOne({id:i}):Promise.resolve(),c===u?r.components.find({type:u}):Promise.resolve()]),([a,s])=>{const e=(s||[]).find(C=>C.providerId===o);m.reset(a||e||{}),e&&d(e.id)},[]);const A=async a=>{(a.config||l)&&(a.config=Object.assign(a.config||{},l),Object.entries(a.config).forEach(([s,e])=>a.config[s]=Array.isArray(e)?e:[e]));try{const s={...a,providerId:o,providerType:c,parentId:y?.id};if(i)await r.components.update({id:i},s);else{const{id:e}=await r.components.create(s);d(e)}S(n("itemSaveSuccessful"))}catch(s){b("itemSaveError",s)}};return t(R,{variant:"light",children:f(w,{isHorizontal:!0,onSubmit:m.handleSubmit(A),className:"keycloak__form",children:[t(x,{...m,children:t(I,{properties:P.properties})}),f(D,{children:[t(p,{"data-testid":"save",type:"submit",children:n("save")}),t(p,{variant:"link",component:a=>t(_,{...a,to:B({realm:h,providerId:o})}),children:n("cancel")})]})]})})};export{q as P};
//# sourceMappingURL=PageHandler-BsZt2gxJ.js.map
