import{jsxs as w,jsx as l}from"react/jsx-runtime";import{f,u as V,a as E}from"./CodeEditor--AHMF_Ho.js";import{ar as G,cd as j,ce as O,a0 as H,f as $,B as z,bU as K,dV as W,dF as q,dW as J}from"./main-C047jAp3.js";var p=(a=>(a.text="text",a.dataURL="dataURL",a))(p||{});function M(a,o){return new Promise((d,n)=>{const i=new FileReader;switch(i.onload=()=>d(i.result),i.onerror=()=>n(i.error),o){case"text":i.readAsText(a);break;case"dataURL":i.readAsDataURL(a);break;default:n("unknown type")}})}const P=({id:a,type:o,value:d="",filename:n="",onChange:i,onBrowseButtonClick:s,onClearButtonClick:b,onTextAreaClick:A,onTextChange:h,className:D="",isDisabled:u=!1,isReadOnly:B=!1,isLoading:R=!1,spinnerAriaValueText:k,isRequired:m=!1,isDragActive:g=!1,validated:x="default","aria-label":C="File upload",filenamePlaceholder:v="Drag a file here or browse to upload",filenameAriaLabel:I=n?"Read only filename":v,browseButtonText:N="Browse...",clearButtonText:y="Clear",isClearButtonDisabled:L=!n&&!d,containerRef:U=null,allowEditingUploadedText:S=!1,hideDefaultPreview:F=!1,children:T=null,...e})=>{const r=(t,c)=>{i?.(t,n,c),h?.(t)};return w("div",{className:G(f.fileUpload,g&&f.modifiers.dragHover,R&&f.modifiers.loading,D),ref:U,...e,children:[l("div",{className:f.fileUploadFileSelect,children:w(j,{children:[l(O,{isFill:!0,children:l(H,{isDisabled:u,id:`${a}-filename`,name:`${a}-filename`,"aria-label":I,placeholder:v,"aria-describedby":`${a}-browse-button`,value:n,readOnlyVariant:"default"})}),l(O,{children:l($,{id:`${a}-browse-button`,variant:z.control,onClick:s,isDisabled:u,children:N})}),l(O,{children:l($,{variant:z.control,isDisabled:u||L,onClick:b,children:y})})]})}),w("div",{className:f.fileUploadFileDetails,children:[!F&&o===p.text&&l(K,{readOnly:B||!!n&&!S,disabled:u,isRequired:m,resizeOrientation:W.vertical,validated:x,id:a,name:a,"aria-label":C,value:d,onChange:(t,c)=>r(c,t),onClick:A}),R&&l("div",{className:f.fileUploadFileDetailsSpinner,children:l(q,{size:J.lg,"aria-valuetext":k})})]}),T]})};P.displayName="FileUploadField";const Q=({id:a,type:o,value:d=o===p.text||o===p.dataURL?"":void 0,filename:n="",children:i=null,onChange:s,onFileInputChange:b,onReadStarted:A,onReadFinished:h,onReadFailed:D,onClearClick:u,onClick:B=x=>x.preventDefault(),onTextChange:R,onDataChange:k,dropzoneProps:m={},...g})=>{const x=(e,r)=>{if(e.length>0){const t=e[0];r?.type==="drop"&&b?.(r,t),o===p.text||o===p.dataURL?(s?.("",t.name,r),A?.(t),M(t,o).then(c=>{h?.(t),s?.(c,t.name,r),k?.(c)}).catch(c=>{D?.(c,t),h?.(t),s?.("","",r),k?.("")})):s?.(t,t.name,r)}m.onDropAccepted?.(e,r)},C=(e,r)=>{e.length>0&&s?.("",e[0].file.name,r),m.onDropRejected?.(e,r)},v=e=>{s?.("","",e),u?.(e),S("")},{getRootProps:I,getInputProps:N,isDragActive:y,open:L,inputRef:U}=V({multiple:!1,...m,onDropAccepted:x,onDropRejected:C}),S=e=>{U.current&&(U.current.value=e)},F=N(),T={...F,onChange:async e=>{F.onChange?.(e);const r=await E(e.nativeEvent);r.length===1&&b?.(e,r[0])}};return w(P,{...I({...g,refKey:"containerRef",onClick:e=>e.preventDefault()}),tabIndex:void 0,id:a,type:o,filename:n,value:d,onChange:s,isDragActive:y,onBrowseButtonClick:L,onClearButtonClick:v,onTextAreaClick:B,onTextChange:R,onClick:e=>e.stopPropagation(),children:[l("input",{...T,ref:U}),i]})};Q.displayName="FileUpload";export{Q as F};
//# sourceMappingURL=FileUpload-2t3HfN2b.js.map
