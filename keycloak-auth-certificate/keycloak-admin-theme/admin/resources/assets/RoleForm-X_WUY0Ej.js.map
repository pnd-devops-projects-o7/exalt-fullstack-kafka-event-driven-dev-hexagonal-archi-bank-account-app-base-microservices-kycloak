{"version":3,"file":"RoleForm-X_WUY0Ej.js","sources":["../../../../../../../src/components/role-form/RoleForm.tsx"],"sourcesContent":["import { ActionGroup, Button, PageSection } from \"@patternfly/react-core\";\nimport {\n  SubmitHandler,\n  UseFormReturn,\n  useFormContext,\n  useWatch,\n} from \"react-hook-form\";\nimport { useTranslation } from \"react-i18next\";\nimport { Link, To } from \"react-router-dom\";\nimport {\n  FormSubmitButton,\n  TextAreaControl,\n  TextControl,\n} from \"@keycloak/keycloak-ui-shared\";\n\nimport { FormAccess } from \"../form/FormAccess\";\nimport { AttributeForm } from \"../key-value-form/AttributeForm\";\nimport { ViewHeader } from \"../view-header/ViewHeader\";\n\nexport type RoleFormProps = {\n  form: UseFormReturn<AttributeForm>;\n  onSubmit: SubmitHandler<AttributeForm>;\n  cancelLink: To;\n  role: \"manage-realm\" | \"manage-clients\";\n  editMode: boolean;\n};\n\nexport const RoleForm = ({\n  form: { formState },\n  onSubmit,\n  cancelLink,\n  role,\n  editMode,\n}: RoleFormProps) => {\n  const { t } = useTranslation();\n  const { control, handleSubmit } = useFormContext<AttributeForm>();\n\n  const roleName = useWatch({\n    control,\n    defaultValue: undefined,\n    name: \"name\",\n  });\n\n  return (\n    <>\n      {!editMode && <ViewHeader titleKey={t(\"createRole\")} />}\n      <PageSection variant=\"light\">\n        <FormAccess\n          isHorizontal\n          onSubmit={handleSubmit(onSubmit)}\n          role={role}\n          className=\"pf-v5-u-mt-lg\"\n          fineGrainedAccess={true} // We would never want to show this form in read-only mode\n        >\n          <TextControl\n            name=\"name\"\n            label={t(\"roleName\")}\n            rules={{\n              required: !editMode ? t(\"required\") : undefined,\n              validate(value) {\n                if (!value?.trim()) {\n                  return t(\"required\");\n                }\n              },\n            }}\n            isDisabled={editMode}\n          />\n          <TextAreaControl\n            name=\"description\"\n            label={t(\"description\")}\n            rules={{\n              maxLength: {\n                value: 255,\n                message: t(\"maxLength\", { length: 255 }),\n              },\n            }}\n            isDisabled={roleName?.includes(\"default-roles\") ?? false}\n          />\n          <ActionGroup>\n            <FormSubmitButton\n              formState={formState}\n              data-testid=\"save\"\n              allowInvalid\n              allowNonDirty\n            >\n              {t(\"save\")}\n            </FormSubmitButton>\n            <Button\n              data-testid=\"cancel\"\n              variant=\"link\"\n              component={(props) => <Link {...props} to={cancelLink} />}\n            >\n              {t(\"cancel\")}\n            </Button>\n          </ActionGroup>\n        </FormAccess>\n      </PageSection>\n    </>\n  );\n};\n"],"names":["RoleForm","formState","onSubmit","cancelLink","role","editMode","t","useTranslation","control","handleSubmit","useFormContext","roleName","useWatch","jsxs","Fragment","jsx","ViewHeader","PageSection","FormAccess","TextControl","value","TextAreaControl","ActionGroup","FormSubmitButton","Button","props","Link"],"mappings":"6PA2BO,MAAMA,EAAW,CAAC,CACvB,KAAM,CAAE,UAAAC,CAAU,EAClB,SAAAC,EACA,WAAAC,EACA,KAAAC,EACA,SAAAC,CACF,IAAqB,CACb,KAAA,CAAE,EAAAC,GAAMC,IACR,CAAE,QAAAC,EAAS,aAAAC,CAAa,EAAIC,EAA8B,EAE1DC,EAAWC,EAAS,CACxB,QAAAJ,EACA,aAAc,OACd,KAAM,MAAA,CACP,EAED,OAEKK,EAAAC,EAAA,CAAA,SAAA,CAAA,CAACT,GAAaU,EAAAC,EAAA,CAAW,SAAUV,EAAE,YAAY,EAAG,EACrDS,EAACE,EAAY,CAAA,QAAQ,QACnB,SAAAJ,EAACK,EAAA,CACC,aAAY,GACZ,SAAUT,EAAaP,CAAQ,EAC/B,KAAAE,EACA,UAAU,gBACV,kBAAmB,GAEnB,SAAA,CAAAW,EAACI,EAAA,CACC,KAAK,OACL,MAAOb,EAAE,UAAU,EACnB,MAAO,CACL,SAAWD,EAA2B,OAAhBC,EAAE,UAAU,EAClC,SAASc,EAAO,CACV,GAAA,CAACA,GAAO,OACV,OAAOd,EAAE,UAAU,CAEvB,CACF,EACA,WAAYD,CAAA,CACd,EACAU,EAACM,EAAA,CACC,KAAK,cACL,MAAOf,EAAE,aAAa,EACtB,MAAO,CACL,UAAW,CACT,MAAO,IACP,QAASA,EAAE,YAAa,CAAE,OAAQ,IAAK,CACzC,CACF,EACA,WAAYK,GAAU,SAAS,eAAe,GAAK,EAAA,CACrD,IACCW,EACC,CAAA,SAAA,CAAAP,EAACQ,EAAA,CACC,UAAAtB,EACA,cAAY,OACZ,aAAY,GACZ,cAAa,GAEZ,WAAE,MAAM,CAAA,CACX,EACAc,EAACS,EAAA,CACC,cAAY,SACZ,QAAQ,OACR,UAAYC,GAAUV,EAACW,GAAM,GAAGD,EAAO,GAAItB,EAAY,EAEtD,WAAE,QAAQ,CAAA,CACb,CAAA,EACF,CAAA,CAAA,CAAA,EAEJ,CACF,CAAA,CAAA,CAEJ"}