import{jsxs as n,Fragment as C,jsx as a}from"react/jsx-runtime";import{u as b,a as F,b as w,d as y,j as S,$ as A,P as x,m as T,Q as j,A as E,ap as I,f as V,L,bL as P,n as $,s as k,v as O,w as H,o as N,p as U,bM as z}from"./main-C047jAp3.js";import{useState as D}from"react";import{F as K}from"./FormAccess-CEFqBG2E.js";import{F as Q}from"./FileUploadForm-BSqaRKUe.js";import{V as W}from"./ViewHeader-Y2Z8ln-o.js";import{C as X,a as B}from"./ClientDescription-CDXwCqe-.js";import{L as G}from"./CodeEditor--AHMF_Ho.js";import"react-dom";import"./copy-icon-D1BxihC2.js";import"./FileUpload-2t3HfN2b.js";import"./SwitchControl-87mhceN2.js";const J=r=>r.match(/(<.[^(><.)]+>)/g);function ie(){const{adminClient:r}=b(),{t:s}=F(),c=w(),{realm:o}=y(),i=S(),{handleSubmit:m,setValue:d,formState:p}=i,[u,h]=D({}),{addAlert:f,addError:l}=A(),g=async t=>{try{const e=await v(t);$(e,d),h(e)}catch(e){l("importParseError",e)}};async function v(t){if(!J(t))return JSON.parse(t);const e=await k(`${H(r.baseUrl)}admin/realms/${o}/client-description-converter`,{method:"POST",body:t,headers:O(await r.getAccessToken())});if(!e.ok)throw new Error(`Server responded with invalid status: ${e.statusText}`);return e.json()}return n(C,{children:[a(W,{titleKey:"importClient",subKey:"clientsExplain"}),a(x,{variant:"light",children:a(K,{isHorizontal:!0,onSubmit:m(async t=>{try{const e=await r.clients.create({...u,...N({...t,attributes:t.attributes||{}})});f(s("clientImportSuccess"),U.success),c(z({realm:o,clientId:e.id,tab:"settings"}))}catch(e){l("clientImportError",e)}}),role:"manage-clients",children:n(T,{...i,children:[a(Q,{id:"realm-file",language:G.json,extension:".json,.xml",helpText:s("helpFileUploadClient"),onChange:g}),a(X,{hasConfigureAccess:!0}),a(j,{name:"protocol",label:s("type"),readOnly:!0}),a(B,{unWrap:!0}),n(E,{children:[a(I,{formState:p,allowInvalid:!0,allowNonDirty:!0,children:s("save")}),a(V,{variant:"link",component:t=>a(L,{...t,to:P({realm:o})}),children:s("cancel")})]})]})})})]})}export{ie as default};
//# sourceMappingURL=ImportForm-BH_7i8S-.js.map
