import{jsxs as c,Fragment as I,jsx as t}from"react/jsx-runtime";import{u as w,a as N,b as z,$ as C,j as F,C as k,cE as l,D as H,P as U,m as E,Q as m,A as P,f as d,B as V,L as j,p as x}from"./main-C047jAp3.js";import{useState as B}from"react";import{F as T}from"./FormAccess-CEFqBG2E.js";import{V as q}from"./ViewHeader-Y2Z8ln-o.js";import{u as L}from"./useParams-6mfeCu18.js";import{u as Q}from"./useToggle-K3Kx99tM.js";import{D as $}from"./DeleteScopeDialog-Q3bc6Mya.js";import"react-dom";import"./copy-icon-D1BxihC2.js";import"./ConfirmDialog-d09hGFUk.js";function ee(){const{adminClient:n}=w(),{t:e}=N(),{id:o,scopeId:i,realm:s}=L(),p=z(),{addAlert:S,addError:b}=C(),[v,u]=Q(),[r,h]=B(),g=F({mode:"onChange"}),{reset:f,handleSubmit:y}=g;k(async()=>{if(i){const a=await n.clients.getAuthorizationScope({id:o,scopeId:i});if(!a)throw new Error(e("notFound"));return a}},a=>{h(a),f({...a})},[]);const A=async a=>{try{i?(await n.clients.updateAuthorizationScope({id:o,scopeId:i},a),h(a)):(await n.clients.createAuthorizationScope({id:o},{name:a.name,displayName:a.displayName,iconUri:a.iconUri}),p(l({realm:s,clientId:o,tab:"scopes"}))),S(e((i?"update":"create")+"ScopeSuccess"),x.success)}catch(D){b("scopeSaveError",D)}};return c(I,{children:[t($,{clientId:o,open:v,toggleDialog:u,selectedScope:r,refresh:()=>p(l({realm:s,clientId:o,tab:"scopes"}))}),t(q,{titleKey:i?r?.name:e("createAuthorizationScope"),dropdownItems:i?[t(H,{"data-testid":"delete-resource",onClick:()=>u(),children:e("delete")},"delete")]:void 0}),t(U,{variant:"light",children:t(E,{...g,children:c(T,{isHorizontal:!0,role:"manage-authorization",onSubmit:y(A),children:[t(m,{name:"name",label:e("name"),labelIcon:e("scopeNameHelp"),rules:{required:e("required")}}),t(m,{name:"displayName",label:e("displayName"),labelIcon:e("scopeDisplayNameHelp")}),t(m,{name:"iconUri",label:e("iconUri"),labelIcon:e("iconUriHelp")}),t(P,{children:c("div",{className:"pf-v5-u-mt-md",children:[t(d,{variant:V.primary,type:"submit","data-testid":"save",children:e("save")}),r?t(d,{variant:"link","data-testid":"revert",onClick:()=>f({...r}),children:e("revert")}):t(d,{variant:"link","data-testid":"cancel",component:a=>t(j,{...a,to:l({realm:s,clientId:o,tab:"scopes"})}),children:e("cancel")})]})})]})})})]})}export{ee as default};
//# sourceMappingURL=ScopeDetails-BjvGANrZ.js.map
