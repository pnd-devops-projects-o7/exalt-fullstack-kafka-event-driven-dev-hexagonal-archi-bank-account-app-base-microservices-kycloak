import{jsxs as h,Fragment as y,jsx as t}from"react/jsx-runtime";import{u as F,a as D,b as K,$ as v,d as C,B as w,p as g,S as x,f as $,L as f,cP as k,bx as I,k as N,b_ as P,dg as V,K as B}from"./main-C047jAp3.js";import{useState as E}from"react";import{t as T}from"./translationFormatter-CkqjPJdy.js";import{u as j}from"./ConfirmDialog-d09hGFUk.js";const U=({defaultRoleName:c,toDetail:m,messageBundle:n,...a})=>{const{t:l}=D(n),{realm:d}=C(),{hasAccess:s,hasSomeAccess:i}=P(),e=s("view-realm")&&i("view-clients","manage-clients");return a.name!==c?t(f,{to:m(a.id),children:a.name}):h(y,{children:[e?t(f,{to:V({realm:d,tab:"user-registration"}),children:a.name}):t("span",{children:a.name}),t(B,{helpText:l(`${n}:defaultRole`),fieldLabelId:"defaultRole"})]})},J=({loader:c,paginated:m=!0,parentRoleId:n,messageBundle:a="roles",toCreate:l,toDetail:d,isReadOnly:s})=>{const{adminClient:i}=F(),{t:e}=D(),L=K(),{addAlert:p,addError:b}=v(),{realmRepresentation:u}=C(),[r,R]=E(),[A,S]=j({titleKey:"roleDeleteConfirm",messageKey:e("roleDeleteConfirmDialog",{selectedRoleName:r?r.name:""}),continueButtonLabel:"delete",continueButtonVariant:w.danger,onConfirm:async()=>{try{n?await i.roles.delCompositeRoles({id:n},[r]):await i.roles.delById({id:r.id}),R(void 0),p(e("roleDeletedSuccess"),g.success)}catch(o){b("roleDeleteError",o)}}});return h(y,{children:[t(S,{}),t(x,{loader:c,ariaLabelKey:"roleList",searchPlaceholderKey:"searchForRoles",isPaginated:m,toolbarItem:!s&&t($,{"data-testid":"create-role",component:o=>t(f,{...o,to:l}),children:e("createRole")}),actions:s?void 0:[{title:e("delete"),onRowClick:o=>{R(o),u?.defaultRole&&o.name===u.defaultRole.name?p(e("defaultRoleDeleteError"),g.danger):A()}}],columns:[{name:"name",displayKey:"roleName",cellRenderer:o=>t(U,{...o,defaultRoleName:u?.defaultRole?.name,toDetail:d,messageBundle:a})},{name:"composite",displayKey:"composite",cellFormatters:[k(),I()]},{name:"description",cellFormatters:[T(e)]}],emptyState:t(N,{hasIcon:!0,message:e(`noRoles-${a}`),instructions:s?"":e(`noRolesInstructions-${a}`),primaryActionText:s?"":e("createRole"),onPrimaryAction:()=>L(l)})},r?r.id:"roleList")]})};export{J as R};
//# sourceMappingURL=RolesList-DbfiSj5E.js.map
