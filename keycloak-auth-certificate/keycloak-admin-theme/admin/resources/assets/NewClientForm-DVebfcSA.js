import{jsxs as J,jsx as B,Fragment as ue}from"react/jsx-runtime";import{aq as O,f as q,B as G,ar as y,bF as me,bG as pe,bH as ve,as as ne,bI as fe,bJ as be,bK as ge,a as X,bB as ze,W as xe,u as we,d as Ne,b as Ee,$ as he,j as Se,P as ye,m as Ce,bL as Ie,o as ke,p as _e,bM as Te}from"./main-C047jAp3.js";import{F as ie}from"./FormAccess-CEFqBG2E.js";import{V as We}from"./ViewHeader-Y2Z8ln-o.js";import{C as Be,a as Oe}from"./ClientDescription-CDXwCqe-.js";import{g as je}from"./utils-C-TUnOch.js";import{L as Fe}from"./LoginSettings-D2CBKGTM.js";import*as I from"react";import t,{useState as Le}from"react";import"react-dom";import"./copy-icon-D1BxihC2.js";import"./SwitchControl-87mhceN2.js";import"./MultiLineInput-lQlb7SN3.js";const x={button:"pf-v5-c-button",dirRtl:"pf-v5-m-dir-rtl",drawer:"pf-v5-c-drawer",modalBox:"pf-v5-c-modal-box",modifiers:{finished:"pf-m-finished",expanded:"pf-m-expanded",current:"pf-m-current",expandable:"pf-m-expandable",disabled:"pf-m-disabled",noPadding:"pf-m-no-padding"},pageMainWizard:"pf-v5-c-page__main-wizard",themeDark:"pf-v5-theme-dark",wizard:"pf-v5-c-wizard",wizardClose:"pf-v5-c-wizard__close",wizardDescription:"pf-v5-c-wizard__description",wizardFooter:"pf-v5-c-wizard__footer",wizardFooterCancel:"pf-v5-c-wizard__footer-cancel",wizardHeader:"pf-v5-c-wizard__header",wizardInnerWrap:"pf-v5-c-wizard__inner-wrap",wizardMain:"pf-v5-c-wizard__main",wizardMainBody:"pf-v5-c-wizard__main-body",wizardNav:"pf-v5-c-wizard__nav",wizardNavItem:"pf-v5-c-wizard__nav-item",wizardNavLink:"pf-v5-c-wizard__nav-link",wizardNavLinkText:"pf-v5-c-wizard__nav-link-text",wizardNavLinkToggle:"pf-v5-c-wizard__nav-link-toggle",wizardNavLinkToggleIcon:"pf-v5-c-wizard__nav-link-toggle-icon",wizardNavList:"pf-v5-c-wizard__nav-list",wizardOuterWrap:"pf-v5-c-wizard__outer-wrap",wizardTitle:"pf-v5-c-wizard__title",wizardTitleText:"pf-v5-c-wizard__title-text",wizardToggle:"pf-v5-c-wizard__toggle",wizardToggleIcon:"pf-v5-c-wizard__toggle-icon",wizardToggleList:"pf-v5-c-wizard__toggle-list",wizardToggleListItem:"pf-v5-c-wizard__toggle-list-item",wizardToggleNum:"pf-v5-c-wizard__toggle-num",wizardToggleSeparator:"pf-v5-c-wizard__toggle-separator"};var U;(function(e){e.Default="default",e.Error="error"})(U||(U={}));var H;(function(e){e.Next="next",e.Back="back",e.Nav="nav"})(H||(H={}));function Ve(e){return typeof e=="function"||t.isValidElement(e)}function ee(e){return typeof e=="function"||t.isValidElement(e)}function se(e){return typeof e=="function"||t.isValidElement(e)}function Pe(e){return e?.subStepIds===void 0&&!R(e)}function R(e){return e?.parentId!==void 0}function M(e){return e?.subStepIds!==void 0}const re=e=>{var{children:a,className:l}=e,r=O(e,["children","className"]);return t.createElement("footer",Object.assign({className:y(x.wizardFooter,l)},r),a)},Y=e=>{var{activeStep:a}=e,l=O(e,["activeStep"]);const r=!se(a?.footer)&&a?.footer;return t.createElement(De,Object.assign({},l,r))},De=e=>{var{onNext:a,onBack:l,onClose:r,isNextDisabled:s,isBackDisabled:i,isBackHidden:u,isCancelHidden:c,nextButtonText:d="Next",backButtonText:n="Back",cancelButtonText:g="Cancel",nextButtonProps:z,backButtonProps:f,cancelButtonProps:o,className:N}=e,p=O(e,["onNext","onBack","onClose","isNextDisabled","isBackDisabled","isBackHidden","isCancelHidden","nextButtonText","backButtonText","cancelButtonText","nextButtonProps","backButtonProps","cancelButtonProps","className"]);return t.createElement(re,Object.assign({className:N},p),!u&&t.createElement(q,Object.assign({variant:G.secondary,onClick:l,isDisabled:i},f),n),t.createElement(q,Object.assign({variant:G.primary,type:"submit",onClick:a,isDisabled:s},z),d),!c&&t.createElement("div",{className:x.wizardFooterCancel},t.createElement(q,Object.assign({variant:G.link,onClick:r},o),g)))};re.displayName="WizardFooterWrapper";Y.displayName="WizardFooter";const Z=t.createContext({}),oe=({steps:e,footer:a,activeStepIndex:l,children:r,onNext:s,onBack:i,onClose:u,goToStepById:c,goToStepByName:d,goToStepByIndex:n,shouldFocusContent:g,mainWrapperRef:z})=>{const[f,o]=t.useState(e),[N,p]=t.useState();t.useEffect(()=>{if(f.length!==e.length){const h=e.map(C=>{const F=f.find($=>$.id===C.id);return F?Object.assign(Object.assign({},F),C):C});o(h)}},[f,e]);const w=t.useMemo(()=>f.map((h,C)=>Object.assign(Object.assign({},h),e[C])),[e,f]),v=t.useMemo(()=>w.find(h=>h.index===l),[l,w]),S=t.useCallback(()=>u?.(null),[u]),E=t.useCallback(()=>s(null,w),[s,w]),W=t.useCallback(()=>i(null,w),[i,w]),m=t.useMemo(()=>{const h=v?.footer||N||a;if(se(h)){const C=h;return typeof C=="function"?C(v,E,W,S):C}return t.createElement(Y,Object.assign({activeStep:v,onNext:E,onBack:W,onClose:S,isBackDisabled:v?.index===1||R(v)&&v?.index===2},h))},[N,a,v,E,W,S]),j=t.useCallback(h=>w.find(C=>C.id===h),[w]),V=t.useCallback(h=>o(C=>C.map(F=>F.id===h.id?Object.assign(Object.assign({},F),h):F)),[]);return t.createElement(Z.Provider,{value:{steps:w,activeStep:v,footer:m,close:S,getStep:j,setStep:V,goToNextStep:E,goToPrevStep:W,setFooter:p,goToStepById:t.useCallback(h=>c(w,h),[c,w]),goToStepByName:t.useCallback(h=>d(w,h),[d,w]),goToStepByIndex:t.useCallback(h=>n(null,w,h),[n,w]),shouldFocusContent:g,mainWrapperRef:z}},r)};oe.displayName="WizardContextProvider";const K=()=>t.useContext(Z),L=e=>{var{children:a,steps:l}=e,r=O(e,["children","steps"]);const{activeStep:s,setStep:i}=K(),{id:u,name:c,body:d,isDisabled:n,isHidden:g,navItem:z,footer:f,status:o}=r,N=M(s);return t.useEffect(()=>{i(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({id:u,name:c},d&&{body:d}),n&&{isDisabled:n}),g&&{isHidden:g}),z&&{navItem:z}),f&&{footer:f}),o&&{status:o}),!N&&u===s?.id&&!s?.isVisited&&{isVisited:!0}))},[d,f,u,n,g,c,z,o,N,i,s?.id,s?.isVisited]),t.createElement(t.Fragment,null,a)};L.displayName="WizardStep";const He=e=>t.Children.toArray(e).reduce((a,l,r)=>{if(Ae(l)){const{props:s}=l,{steps:i,id:u}=s,c=a.length+1,d=[];a.push(Object.assign(Object.assign(Object.assign({index:c,component:l},r===0&&!i?.length&&{isVisited:!0}),i&&{subStepIds:i?.map((n,g)=>(d.push(Object.assign(Object.assign({index:c+g+1,component:n,parentId:u},r===0&&g===0&&{isVisited:!0}),te(n.props))),n.props.id))}),te(s)),...d)}else throw new Error("Wizard only accepts children of type WizardStep.");return a},[]);function Ae(e){return t.isValidElement(e)&&e.type===L}const te=e=>{var a=O(e,["children","steps"]);return a},ae=(e,a)=>{if(!M(a)&&!a.isHidden&&!a.isDisabled)if(R(a)){const l=e.find(r=>r.id===a.parentId);if(!l.isHidden&&!l.isDisabled)return!0}else return!0;return!1},le=e=>{var{children:a,className:l,hasNoPadding:r=!1,"aria-label":s,"aria-labelledby":i,component:u="div"}=e,c=O(e,["children","className","hasNoPadding","aria-label","aria-labelledby","component"]);const[d,n]=t.useState(!1),[g,z]=t.useState(void 0),f=u,{activeStep:o,shouldFocusContent:N,mainWrapperRef:p}=t.useContext(Z),w=s||`${o?.name} content`;return t.useEffect(()=>{const S=pe(()=>{if(p?.current){const{offsetWidth:W,offsetHeight:m,scrollHeight:j}=p.current;g!==W&&(z(W),n(m<j))}},250);let E=()=>{};if(p?.current){E=me(p.current,S);const{offsetHeight:W,scrollHeight:m}=p.current;n(W<m),z(p.current.offsetWidth)}return()=>{E()}},[g]),t.createElement(f,Object.assign({ref:p},N&&{tabIndex:-1},u==="div"&&d&&{role:"region"},d&&{"aria-label":w,"aria-labelledby":i,tabIndex:0},{className:y(x.wizardMain,l)},c),t.createElement("div",{className:y(x.wizardMainBody,r&&x.modifiers.noPadding)},a))};le.displayName="WizardBody";const de=({steps:e,activeStep:a,footer:l,nav:r,isNavExpanded:s,toggleNavExpanded:i,"aria-label":u="Wizard toggle"})=>{const c=R(a),d=c&&e.find(o=>o.id===a.parentId),g=e.filter(o=>!R(o)).indexOf(d||a)+1,z=t.useCallback(o=>{s&&o.key===ve.Escape&&i?.(o)},[s,i]);t.useEffect(()=>{const o=typeof document<"u"?document.body:null;return o?.addEventListener("keydown",z,!1),()=>{o?.removeEventListener("keydown",z,!1)}},[z]);const f=e.map(o=>{var N;const p=((N=o.component)===null||N===void 0?void 0:N.props)||{},{children:w,body:v}=p,S=O(p,["children","body"]);return t.createElement(t.Fragment,{key:o.id},a?.id===o.id&&(v||v===void 0?t.createElement(le,Object.assign({},v),w):w),t.createElement("div",{key:o.id,style:{display:"none"}},t.createElement(L,Object.assign({},S))))});return t.createElement(t.Fragment,null,t.createElement("button",{onClick:i,className:y(x.wizardToggle,s&&"pf-m-expanded"),"aria-label":u,"aria-expanded":s},t.createElement("span",{className:y(x.wizardToggleList)},t.createElement("span",{className:y(x.wizardToggleListItem)},t.createElement("span",{className:y(x.wizardToggleNum)},g)," ",d?.name||a?.name,c&&t.createElement(ne,{className:y(x.wizardToggleSeparator),"aria-hidden":"true"})),c&&t.createElement("span",{className:y(x.wizardToggleListItem)},a?.name)),t.createElement("span",{className:y(x.wizardToggleIcon)},t.createElement(fe,{"aria-hidden":"true"}))),t.createElement("div",{className:y(x.wizardOuterWrap)},t.createElement("div",{className:y(x.wizardInnerWrap)},r,f),l))};de.displayName="WizardToggle";const Q=e=>{var{children:a,"aria-label":l,"aria-labelledby":r,isExpanded:s=!1,isInnerList:i=!1,className:u}=e,c=O(e,["children","aria-label","aria-labelledby","isExpanded","isInnerList","className"]);return i?I.createElement("ol",Object.assign({className:y(x.wizardNavList,u),role:"list"},c),a):I.createElement("nav",Object.assign({className:y(x.wizardNav,s&&x.modifiers.expanded,u),"aria-label":l,"aria-labelledby":r},c),I.createElement("ol",{className:y(x.wizardNavList),role:"list"},a))};Q.displayName="WizardNav";const Re={name:"--pf-v5-global--spacer--sm",value:"0.5rem",var:"var(--pf-v5-global--spacer--sm)"},Me={name:"--pf-v5-global--danger-color--100",value:"#c9190b",var:"var(--pf-v5-global--danger-color--100)"},A=e=>{var{children:a=null,content:l="",isCurrent:r=!1,isDisabled:s=!1,isVisited:i=!1,stepIndex:u,onClick:c,component:d="button",href:n,isExpandable:g=!1,id:z,status:f="default",target:o,ouiaId:N,ouiaSafe:p=!0,className:w}=e,v=O(e,["children","content","isCurrent","isDisabled","isVisited","stepIndex","onClick","component","href","isExpandable","id","status","target","ouiaId","ouiaSafe","className"]);const[S,E]=I.useState(!1),W=be(A.displayName,N,p);return I.useEffect(()=>{E(r)},[r]),I.createElement("li",Object.assign({className:y(x.wizardNavItem,g&&x.modifiers.expandable,g&&S&&x.modifiers.expanded,w)},v),I.createElement(d,Object.assign({},d==="a"?{tabIndex:s?-1:void 0,href:n,target:o}:{disabled:s},z&&{id:z.toString()},{onClick:m=>{m.stopPropagation(),g?E(!S||r):c?.(m,u)},className:y(x.wizardNavLink,r&&x.modifiers.current,s&&x.modifiers.disabled),"aria-disabled":s?!0:null,"aria-current":r&&!a?"step":!1},g&&{"aria-expanded":S},W),g?I.createElement(I.Fragment,null,I.createElement("span",{className:y(x.wizardNavLinkText)},l),I.createElement("span",{className:y(x.wizardNavLinkToggle)},I.createElement("span",{className:y(x.wizardNavLinkToggleIcon)},I.createElement(ne,{"aria-label":`${r?"Collapse":"Expand"} step icon`})))):I.createElement(I.Fragment,null,l,f===U.Error&&I.createElement(I.Fragment,null,I.createElement("span",{className:"pf-v5-screen-reader"},", ",f),I.createElement("span",{style:{marginLeft:Re.var}},I.createElement(ge,{color:Me.var}))))),a)};A.displayName="WizardNavItem";const Ke=({nav:e,navAriaLabel:a,isVisitRequired:l,isProgressive:r,isNavExpanded:s})=>{const{activeStep:i,steps:u,goToStepByIndex:c}=K(),d=Object.assign({isExpanded:s,"aria-label":a||e?.["aria-label"]||"Wizard steps"},e?.["aria-labelledby"]&&{"aria-labelledby":e["aria-labelledby"]});return t.createElement(Q,Object.assign({},d),u.map((n,g)=>{var z;const f=u.some(p=>p.index>g+1&&p.isVisited),o=n.isDisabled||l&&!n.isVisited&&!f,N=ee(n.navItem)&&t.createElement(t.Fragment,{key:n.id},typeof n.navItem=="function"?n.navItem(n,i,u,c):n.navItem);if(M(n)&&!n.isHidden){let p,w=!1;const v=(z=n.subStepIds)===null||z===void 0?void 0:z.map((E,W)=>{const m=u.find(C=>C.id===E),j=u.some(C=>C.index>m.index&&C.isVisited),V=m.isDisabled||l&&!m.isVisited&&!j,h=ee(m.navItem)&&t.createElement(t.Fragment,{key:m.id},typeof m.navItem=="function"?m.navItem(m,i,u,c):m.navItem);if(!m.isHidden&&(W===0&&(p=m.index),i?.id===m.id&&(w=!0),!r||r&&m.index<=i.index))return h||t.createElement(A,Object.assign({key:m.id,id:m.id,content:m.name,isCurrent:i?.id===m.id,isDisabled:V||o,isVisited:m.isVisited,stepIndex:m.index,onClick:()=>c(m.index),status:m.status},m.navItem))}),S=t.Children.toArray(v).some(E=>t.isValidElement(E)&&!E.props.isDisabled);if(!r||r&&n.index<=i.index)return N||t.createElement(A,Object.assign({key:n.id,id:n.id,content:n.name,isExpandable:n.isExpandable,isCurrent:w,isDisabled:!S||o,isVisited:n.isVisited,stepIndex:p,onClick:()=>c(p),status:n.status},n.navItem),t.createElement(Q,Object.assign({},d,{isInnerList:!0}),v))}if(Pe(n)&&!n.isHidden&&(!r||r&&n.index<=i.index))return N||t.createElement(A,Object.assign({key:n.id,id:n.id,content:n.name,isCurrent:i?.id===n.id,isDisabled:o,isVisited:n.isVisited,stepIndex:n.index,onClick:()=>c(n.index),status:n.status},n.navItem))}))},ce=e=>{var{children:a,footer:l,height:r,width:s,className:i,header:u,nav:c,navAriaLabel:d,startIndex:n=1,isVisitRequired:g=!1,isProgressive:z=!1,onStepChange:f,onSave:o,onClose:N,shouldFocusContent:p=!1}=e,w=O(e,["children","footer","height","width","className","header","nav","navAriaLabel","startIndex","isVisitRequired","isProgressive","onStepChange","onSave","onClose","shouldFocusContent"]);const[v,S]=t.useState(n),E=He(a),W=t.useRef(E[n-1]),m=t.useRef(null);t.useEffect(()=>{M(W.current)&&S(n+1)},[n]),t.useEffect(()=>{v>E.length&&S(n)},[E,v,n]);const j=()=>setTimeout(()=>{var k;!((k=m?.current)===null||k===void 0)&&k.focus&&m.current.focus()},0),V=(k,_=E)=>{const b=_.find(T=>T.index>v&&ae(_,T));if(v>=_.length||!b?.index)return o?o(k):N?.(k);S(b?.index),f?.(k,b,_[v-1],H.Next),p&&j()},h=(k,_=E)=>{const b=[..._].reverse().find(T=>T.index<v&&ae(_,T));S(b?.index),f?.(k,b,_[v-1],H.Back),p&&j()},C=(k,_=E,b)=>{const T=_.length+1;b<1?b=1:b>T&&(b=T);const P=_[b-1],D=_[v-1];S(b),f?.(k,P,D,H.Nav)},F=(k=E,_)=>{const b=k.find(D=>D.id===_),T=b?.index,P=k.length+1;T>0&&T<P&&!b.isDisabled&&!b.isHidden&&S(T)},$=(k=E,_)=>{const b=k.find(D=>D.name===_),T=b?.index,P=k.length+1;T>0&&T<P&&!b.isDisabled&&!b.isHidden&&S(T)};return t.createElement(oe,{steps:E,activeStepIndex:v,footer:l,onNext:V,onBack:h,onClose:N,goToStepById:F,goToStepByName:$,goToStepByIndex:C,shouldFocusContent:p,mainWrapperRef:m},t.createElement("div",Object.assign({className:y(x.wizard,i),style:Object.assign(Object.assign({},r?{height:r}:{}),s?{width:s}:{})},w),u,t.createElement($e,{nav:c,navAriaLabel:d,isVisitRequired:g,isProgressive:z})))},$e=({nav:e,navAriaLabel:a,isVisitRequired:l,isProgressive:r})=>{const{activeStep:s,steps:i,footer:u,goToStepByIndex:c}=K(),[d,n]=t.useState(!1),g=t.useMemo(()=>Ve(e)?typeof e=="function"?e(d,i,s,c):e:t.createElement(Ke,{nav:e,navAriaLabel:a,isNavExpanded:d,isVisitRequired:l,isProgressive:r}),[s,l,r,c,d,e,a,i]);return t.createElement(de,{nav:g,footer:u,steps:i,activeStep:s,isNavExpanded:d,toggleNavExpanded:()=>n(z=>!z)})};ce.displayName="Wizard";const qe=()=>{const{t:e}=X(),a=ze();return J(ie,{isHorizontal:!0,role:"manage-clients",children:[B(xe,{name:"protocol",label:e("clientType"),labelIcon:e("clientTypeHelp"),controller:{defaultValue:""},options:a.map(l=>({key:l,value:je(e,l)}))}),B(Be,{hasConfigureAccess:!0})]})},Ge=e=>{const{t:a}=X(),{trigger:l}=e,{activeStep:r,goToNextStep:s,goToPrevStep:i,close:u}=K(),c=async d=>{await l()&&d?.()};return B(Y,{activeStep:r,onNext:()=>c(s),onBack:i,onClose:u,isBackDisabled:r.index===1,backButtonText:a("back"),nextButtonText:a("next"),cancelButtonText:a("cancel")})};function rt(){const{adminClient:e}=we(),{t:a}=X(),{realm:l}=Ne(),r=Ee(),[s,i]=Le(!1),{addAlert:u,addError:c}=he(),d=Se({defaultValues:{protocol:"openid-connect",clientId:"",name:"",description:"",publicClient:!0,authorizationServicesEnabled:!1,serviceAccountsEnabled:!1,implicitFlowEnabled:!1,directAccessGrantsEnabled:!0,standardFlowEnabled:!0,frontchannelLogout:!0,attributes:{saml_idp_initiated_sso_url_name:""}}}),{getValues:n,watch:g}=d,z=g("protocol"),f=async()=>{if(s)return;i(!0);const N=ke(n());try{const p=await e.clients.create({...N,clientId:N.clientId?.trim()});u(a("createClientSuccess"),_e.success),r(Te({realm:l,clientId:p.id,tab:"settings"}))}catch(p){c("createClientError",p)}finally{i(!1)}},o=a("createClient");return J(ue,{children:[B(We,{titleKey:"createClient",subKey:"clientsExplain"}),B(ye,{variant:"light",children:B(Ce,{...d,children:J(ce,{onClose:()=>r(Ie({realm:l})),navAriaLabel:`${o} steps`,onSave:f,footer:B(Ge,{...d}),children:[B(L,{name:a("generalSettings"),id:"generalSettings",children:B(qe,{})},"generalSettings"),B(L,{name:a("capabilityConfig"),id:"capabilityConfig",isHidden:z==="saml",children:B(Oe,{protocol:z})},"capabilityConfig"),B(L,{name:a("loginSettings"),id:"loginSettings",footer:{backButtonText:a("back"),nextButtonText:a("save"),cancelButtonText:a("cancel")},children:B(ie,{isHorizontal:!0,role:"manage-clients",children:B(Fe,{protocol:z})})},"loginSettings")]})})})]})}export{rt as default};
//# sourceMappingURL=NewClientForm-DVebfcSA.js.map
