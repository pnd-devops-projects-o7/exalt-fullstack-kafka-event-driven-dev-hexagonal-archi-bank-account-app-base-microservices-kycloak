import{jsx as t,jsxs as S,Fragment as U}from"react/jsx-runtime";import{a as C,Y as y,J as v,K as b,N as k,q as W,cd as z,ce as q,U as Y,V as j,f as A,c6 as B,c7 as D,ai as K,dT as F,av as V,aw as x,a0 as G,a3 as Z,ab as O,a8 as H,ac as X,ad as ee,ct as te,Z as ne,_ as P,a4 as J,Q as ae,dU as le,I as oe,cM as re,u as se,C as ie,bE as ce}from"./main-C047jAp3.js";import{C as de}from"./ClientSelect-mboGti-R.js";import{useState as T,useEffect as ue}from"react";import{F as pe}from"./FileUpload-2t3HfN2b.js";import{G as he}from"./GroupPickerDialog-CRtxj-P-.js";import{A as me,a as fe,K as ge}from"./KeySelect-DvFB2tXI.js";import{M as Ce}from"./MultiLineInput-lQlb7SN3.js";import{u as Ie}from"./useToggle-K3Kx99tM.js";import{A as ve,S as be}from"./AddRoleMappingModal-BqwO7G2x.js";import{C as ye,L as Se}from"./CodeEditor--AHMF_Ho.js";const Le=({name:e,label:n,helpText:s,isDisabled:o=!1,defaultValue:r,isNew:l=!0})=>{const{t:a}=C(),{control:u}=y();return t(v,{hasNoPaddingTop:!0,label:a(n),fieldId:e,labelIcon:t(b,{helpText:a(s),fieldLabelId:`${n}`}),children:t(k,{name:I(e),"data-testid":e,defaultValue:l?r:!1,control:u,render:({field:c})=>t(W,{id:e,isDisabled:o,label:a("on"),labelOff:a("off"),isChecked:c.value==="true"||c.value===!0||c.value?.[0]==="true",onChange:(p,h)=>c.onChange(""+h),"data-testid":e,"aria-label":a(n)})})})},Te=e=>t(de,{...e,name:I(e.name)}),$e=({name:e,label:n,helpText:s,defaultValue:o,required:r,isDisabled:l=!1})=>{const{t:a}=C(),{control:u}=y(),[c,p]=T(""),[h,d]=T(!1);return t(v,{label:a(n),labelIcon:t(b,{helpText:a(s),fieldLabelId:`${n}`}),fieldId:e,isRequired:r,children:t(k,{name:I(e),control:u,defaultValue:o||"",render:({field:i})=>t(pe,{id:e,value:i.value,type:"text",filename:c,isDisabled:l,onFileInputChange:(g,L)=>p(L.name),onReadStarted:()=>d(!0),onReadFinished:()=>d(!1),onClearClick:()=>{i.onChange(""),p("")},isLoading:h,allowEditingUploadedText:!1,onChange:(g,L)=>{i.onChange(g),p(L)}})})})},ke=({name:e,label:n,helpText:s,required:o})=>{const{t:r}=C(),[l,a]=T(!1),[u,c]=T(),{control:p}=y();return t(k,{name:I(e),defaultValue:"",control:p,render:({field:h})=>S(U,{children:[l&&t(he,{type:"selectOne",text:{title:"selectGroup",ok:"select"},onConfirm:d=>{h.onChange(d?.[0].path),c(d),a(!1)},onClose:()=>a(!1),filterGroups:u}),t(v,{label:r(n),labelIcon:t(b,{helpText:r(s),fieldLabelId:`${n}`}),fieldId:e,isRequired:o,children:S(z,{children:[t(q,{children:t(Y,{children:h.value&&t(j,{onClick:()=>h.onChange(void 0),children:h.value})})}),t(q,{children:t(A,{id:"kc-join-groups-button",onClick:()=>a(!l),variant:"secondary","data-testid":"join-groups-button",children:r("selectGroup")})})]})})]})})},we=({name:e,label:n,helpText:s,defaultValue:o,options:r,required:l,isDisabled:a=!1})=>{const{t:u}=C(),{control:c}=y(),[p,h]=T(!1);return t(v,{label:u(n),labelIcon:t(b,{helpText:u(s),fieldLabelId:`${n}`}),fieldId:e,isRequired:l,children:t(k,{name:I(e),"data-testid":e,defaultValue:o||r?.[0]||"",control:c,render:({field:d})=>t(B,{toggleId:e,isDisabled:a,onToggle:i=>h(i),onSelect:i=>{d.onChange(i),h(!1)},selections:d.value,variant:D.single,"aria-label":u(n),isOpen:p,children:r?.map(i=>t(K,{selected:i===d.value,value:i,children:i},i))})})})},xe=({name:e,label:n,helpText:s,required:o,isDisabled:r})=>{const{t:l}=C(),{getValues:a,setValue:u,register:c}=y(),[p,h]=T([]),d=I(e);ue(()=>{c(d);const f=JSON.parse(a(d)||"[]");h(f.map(m=>({...m,id:F()})))},[]);const i=()=>h([...p,{key:"",value:"",id:F()}]),g=(f=p)=>{u(d,JSON.stringify(f.filter(m=>m.key!=="").map(({id:m,...R})=>R)))},L=(f,m)=>{$(f,{...p[f],key:m})},w=(f,m)=>{$(f,{...p[f],value:m})},$=(f,m)=>h([...p.slice(0,f),m,...p.slice(f+1)]),M=f=>{const m=[...p.slice(0,f),...p.slice(f+1)];h(m),g(m)};return p.length!==0?S(v,{label:l(n),labelIcon:t(b,{helpText:l(s),fieldLabelId:`${n}`}),fieldId:e,isRequired:o,children:[S(V,{direction:{default:"column"},children:[S(V,{children:[t(x,{grow:{default:"grow"},spacer:{default:"spacerNone"},children:t("strong",{children:l("key")})}),t(x,{grow:{default:"grow"},children:t("strong",{children:l("value")})})]}),p.map((f,m)=>S(V,{"data-testid":"row",children:[t(x,{grow:{default:"grow"},children:t(G,{name:`${d}.${m}.key`,placeholder:l("keyPlaceholder"),"aria-label":l("key"),defaultValue:f.key,"data-testid":`${d}.${m}.key`,onChange:(R,N)=>L(m,N),onBlur:()=>g()})}),t(x,{grow:{default:"grow"},spacer:{default:"spacerNone"},children:t(G,{name:`${d}.${m}.value`,placeholder:l("valuePlaceholder"),"aria-label":l("value"),defaultValue:f.value,"data-testid":`${d}.${m}.value`,onChange:(R,N)=>w(m,N),onBlur:()=>g()})}),t(x,{children:t(A,{variant:"link",title:l("removeAttribute"),isDisabled:r,onClick:()=>M(m),"data-testid":`${d}.${m}.remove`,children:t(Z,{})})})]},f.id))]}),t(me,{children:t(fe,{children:t(A,{"data-testid":`${d}-add-row`,className:"pf-v5-u-px-0 pf-v5-u-mt-sm",variant:"link",icon:t(O,{}),onClick:()=>i(),children:l("addAttribute",{label:n})})})})]}):S(H,{"data-testid":`${e}-empty-state`,className:"pf-v5-u-p-0",variant:"xs",children:[t(X,{children:l("missingAttributes",{label:n})}),t(ee,{children:t(A,{"data-testid":`${e}-add-row`,variant:"link",icon:t(O,{}),size:"sm",onClick:i,isDisabled:r,children:l("addAttribute",{label:n})})})]})};function _(e){return typeof e=="string"&&e.length>0?e.split("##"):[]}function Ae(e){return e.join("##")}const Me=({name:e,label:n,helpText:s,defaultValue:o,options:r,isDisabled:l=!1,stringify:a,required:u})=>{const{t:c}=C(),{control:p}=y(),[h,d]=T(!1);return t(v,{label:c(n),labelIcon:t(b,{helpText:c(s),fieldLabelId:`${n}`}),fieldId:e,isRequired:u,children:t(k,{name:I(e),control:p,defaultValue:a?o||"":o?[o]:[],render:({field:i})=>t(B,{toggleId:e,"data-testid":e,isDisabled:l,chipGroupProps:{numChips:3,expandedText:c("hide"),collapsedText:c("showRemaining")},variant:D.typeaheadMulti,typeAheadAriaLabel:"Select",onToggle:g=>d(g),selections:a?_(i.value):i.value,onSelect:g=>{const L=g.toString(),w=a?_(i.value):i.value;let $;w.includes(L)?$=w.filter(M=>M!==L):$=[...w,L],i.onChange(a?Ae($):$)},onClear:()=>{i.onChange(a?"":[])},isOpen:h,"aria-label":c(n),children:r?.map(g=>t(K,{value:g,children:g},g))})})})};function Re(e){return e&&Array.isArray(e)?e:[e]}const Ne=({name:e,label:n,defaultValue:s,helpText:o,stringify:r,required:l,isDisabled:a=!1})=>{const{t:u}=C(),c=I(e);return t(v,{label:u(n),labelIcon:t(b,{helpText:u(o),fieldLabelId:`${n}`}),fieldId:e,isRequired:l,children:t(Ce,{"aria-label":u(n),name:c,isDisabled:a,defaultValue:Re(s),addButtonLabel:u("addMultivaluedLabel",{fieldLabel:u(n).toLowerCase()}),stringify:r})})},Ve=({name:e,label:n,helpText:s,defaultValue:o,required:r,isDisabled:l=!1})=>{const{t:a}=C();return t(te,{name:I(e),label:a(n),labelIcon:a(s),isDisabled:l,defaultValue:o?.toString(),rules:{required:{value:!!r,message:a("required")}}})},E=e=>e?.includes(".")?e.split("."):["",e||""],qe=e=>e.client?.clientId?`${e.client.clientId}.${e.role.name}`:e.role.name,Fe=({name:e,label:n,helpText:s,defaultValue:o,required:r,isDisabled:l=!1})=>{const{t:a}=C(),[u,c]=Ie(),{control:p,formState:{errors:h}}=y(),d=I(e);return S(v,{label:a(n),labelIcon:t(b,{helpText:a(s),fieldLabelId:`${n}`}),fieldId:e,isRequired:r,children:[t(k,{name:d,defaultValue:o||"",control:p,render:({field:i})=>S(ne,{children:[u&&t(ve,{id:"id",type:"roles",name:e,onAssign:g=>i.onChange(qe(g[0])),onClose:c,isRadio:!0}),i.value!==""&&t(P,{children:t(j,{textMaxWidth:"500px",onClick:()=>i.onChange(""),children:t(be,{role:{name:E(i.value)[1]},client:{clientId:E(i.value)[0]}})})}),t(P,{children:t(A,{onClick:c,variant:"secondary","data-testid":"add-roles",disabled:l,children:a("selectRole.label")})})]})}),h[d]&&t(J,{message:a("required")})]})},Ge=({name:e,label:n,helpText:s,defaultValue:o,required:r,isDisabled:l=!1})=>{const{t:a}=C(),{control:u}=y();return t(v,{label:a(n),labelIcon:t(b,{helpText:t("span",{style:{whiteSpace:"pre-wrap"},children:s}),fieldLabelId:`${n}`}),fieldId:e,isRequired:r,children:t(k,{name:I(e),defaultValue:o,control:u,render:({field:c})=>t(ye,{id:e,"data-testid":e,isReadOnly:l,type:"text",onChange:c.onChange,code:Array.isArray(c.value)?c.value[0]:c.value,height:"600px",language:Se.javascript})})})},Oe=({name:e,label:n,helpText:s,...o})=>{const{t:r}=C();return t(ae,{name:I(e),label:r(n),labelIcon:r(s),"data-testid":e,...o})},Pe=({name:e,label:n,helpText:s,defaultValue:o,required:r,isDisabled:l=!1})=>{const{t:a}=C(),{register:u}=y();return t(v,{label:a(n),labelIcon:t(b,{helpText:a(s),fieldLabelId:`${n}`}),fieldId:e,required:r,children:t(le,{id:e,"data-testid":e,isDisabled:l,defaultValue:o?.toString(),...u(I(e))})})},_e=({name:e,label:n,helpText:s})=>{const{t:o}=C(),{control:r}=y(),{value:l}=oe({control:r,name:e,defaultValue:""});return t(v,{label:o(n),fieldId:e,labelIcon:t(b,{helpText:o(s),fieldLabelId:`${n}`}),className:"keycloak__identity-providers__url_component",children:t(re,{title:o(s),href:l,isInline:!0})})},Ee=({name:e,label:n,helpText:s,required:o=!1})=>{const{adminClient:r}=se(),{t:l}=C(),{formState:{errors:a}}=y(),[u,c]=T(),p=I(e);ie(()=>r.users.getProfile(),d=>c(d),[]);const h=d=>d?.attributes?d.attributes.map(i=>({key:i.name,label:i.name})):[];return u?S(v,{label:l(n),isRequired:o,labelIcon:t(b,{helpText:l(s),fieldLabelId:n}),fieldId:p,children:[t(ge,{name:p,rules:o?{required:!0}:{},selectItems:h(u)}),a[p]&&t(J,{message:l("required")})]}):null},Q={String:Oe,Text:Pe,boolean:Le,List:we,Role:Fe,Script:Ge,Map:xe,Group:ke,ClientList:Te,UserProfileAttributeList:Ee,MultivaluedList:Me,MultivaluedString:Ne,File:$e,Password:Ve,Url:_e},Ue=e=>e in Q,Xe=({properties:e,...n})=>t(U,{children:e.map(s=>{const o=s.type;if(Ue(o)){const r=Q[o];return t(r,{...s,...n},s.name)}else console.warn(`There is no editor registered for ${o}`)})}),I=e=>ce(`config.${e}`);export{Xe as D,I as c};
//# sourceMappingURL=DynamicComponents-CCNvrlYx.js.map
