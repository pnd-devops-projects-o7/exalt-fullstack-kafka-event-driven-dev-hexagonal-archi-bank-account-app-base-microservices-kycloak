import{createElement as N,isValidElement as S,Fragment as J,cloneElement as X,Children as Y,useContext as Z}from"react";import{az as q,e5 as G,e6 as Q,e7 as I,e8 as H,e9 as F,ea as K,eb as _}from"./main-C047jAp3.js";var U={area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0};const R=q(U);var ee=/\s([^'"/\s><]+?)[\s/>]|([^\s=]+)=\s?(".*?"|'.*?')/g;function W(e){var n={type:"tag",name:"",voidElement:!1,attrs:{},children:[]},t=e.match(/<\/?([^\s]+?)[/\s>]/);if(t&&(n.name=t[1],(R[t[1]]||e.charAt(e.length-2)==="/")&&(n.voidElement=!0),n.name.startsWith("!--"))){var i=e.indexOf("-->");return{type:"comment",comment:i!==-1?e.slice(4,i):""}}for(var h=new RegExp(ee),s=null;(s=h.exec(e))!==null;)if(s[0].trim())if(s[1]){var o=s[1].trim(),f=[o,""];o.indexOf("=")>-1&&(f=o.split("=")),n.attrs[f[0]]=f[1],h.lastIndex--}else s[2]&&(n.attrs[s[2]]=s[3].trim().substring(1,s[3].length-1));return n}var te=/<[a-zA-Z0-9\-\!\/](?:"[^"]*"|'[^']*'|[^'">])*>/g,ne=/^\s*$/,se=Object.create(null);function P(e,n){switch(n.type){case"text":return e+n.content;case"tag":return e+="<"+n.name+(n.attrs?function(t){var i=[];for(var h in t)i.push(h+'="'+t[h]+'"');return i.length?" "+i.join(" "):""}(n.attrs):"")+(n.voidElement?"/>":">"),n.voidElement?e:e+n.children.reduce(P,"")+"</"+n.name+">";case"comment":return e+"<!--"+n.comment+"-->"}}var re={parse:function(e,n){n||(n={}),n.components||(n.components=se);var t,i=[],h=[],s=-1,o=!1;if(e.indexOf("<")!==0){var f=e.indexOf("<");i.push({type:"text",content:f===-1?e:e.substring(0,f)})}return e.replace(te,function(l,v){if(o){if(l!=="</"+t.name+">")return;o=!1}var d,g=l.charAt(1)!=="/",k=l.startsWith("<!--"),x=v+l.length,c=e.charAt(x);if(k){var O=W(l);return s<0?(i.push(O),i):((d=h[s]).children.push(O),i)}if(g&&(s++,(t=W(l)).type==="tag"&&n.components[t.name]&&(t.type="component",o=!0),t.voidElement||o||!c||c==="<"||t.children.push({type:"text",content:e.slice(x,e.indexOf("<",x))}),s===0&&i.push(t),(d=h[s-1])&&d.children.push(t),h[s]=t),(!g||t.voidElement)&&(s>-1&&(t.voidElement||t.name===l.slice(2,-1))&&(s--,t=s===-1?i:h[s]),!o&&c!=="<"&&c)){d=s===-1?i:h[s].children;var a=e.indexOf("<",x),p=e.slice(x,a===-1?void 0:a);ne.test(p)&&(p=" "),(a>-1&&s+d.length>=0||p!==" ")&&d.push({type:"text",content:p})}}),i},stringify:function(e){return e.reduce(function(n,t){return n+P("",t)},"")}};const B=(e,n)=>{if(!e)return!1;const t=e.props?.children??e.children;return n?t.length>0:!!t},L=e=>{if(!e)return[];const n=e.props?.children??e.children;return e.props?.i18nIsDynamicList?D(n):n},ae=e=>Array.isArray(e)&&e.every(S),D=e=>Array.isArray(e)?e:[e],ie=(e,n)=>{const t={...n};return t.props=Object.assign(e.props,n.props),t},z=(e,n)=>{if(!e)return"";let t="";const i=D(e),h=n?.transSupportBasicHtmlNodes?n.transKeepBasicHtmlNodesFor??[]:[];return i.forEach((s,o)=>{if(I(s))t+=`${s}`;else if(S(s)){const{props:f,type:l}=s,v=Object.keys(f).length,d=h.indexOf(l)>-1,g=f.children;if(!g&&d&&!v)t+=`<${l}/>`;else if(!g&&(!d||v)||f.i18nIsDynamicList)t+=`<${o}></${o}>`;else if(d&&v===1&&I(g))t+=`<${l}>${g}</${l}>`;else{const k=z(g,n);t+=`<${o}>${k}</${o}>`}}else if(s===null)H("Trans: the passed in value is invalid - seems you passed in a null child.");else if(F(s)){const{format:f,...l}=s,v=Object.keys(l);if(v.length===1){const d=f?`${v[0]}, ${f}`:v[0];t+=`{{${d}}}`}else H("react-i18next: the passed in object contained more than one variable - the object should look like {{ value, format }} where format is optional.",s)}else H("Trans: the passed in value is invalid - seems you passed in a variable like {number} - please pass in variables for interpolation as full objects like {{number}}.",s)}),t},oe=(e,n,t,i,h,s)=>{if(n==="")return[];const o=i.transKeepBasicHtmlNodesFor||[],f=n&&new RegExp(o.map(a=>`<${a}`).join("|")).test(n);if(!e&&!f&&!s)return[n];const l={},v=a=>{D(a).forEach(u=>{I(u)||(B(u)?v(L(u)):F(u)&&!S(u)&&Object.assign(l,u))})};v(e);const d=re.parse(`<0>${n}</0>`),g={...l,...h},k=(a,p,u)=>{const b=L(a),T=c(b,p.children,u);return ae(b)&&T.length===0||a.props?.i18nIsDynamicList?b:T},x=(a,p,u,b,T)=>{a.dummy?(a.children=p,u.push(X(a,{key:b},T?void 0:p))):u.push(...Y.map([a],m=>{const r={...m.props};return delete r.i18nIsDynamicList,N(m.type,{...r,key:b,ref:m.ref},T?null:p)}))},c=(a,p,u)=>{const b=D(a);return D(p).reduce((m,r,A)=>{const j=r.children?.[0]?.content&&t.services.interpolator.interpolate(r.children[0].content,g,t.language);if(r.type==="tag"){let E=b[parseInt(r.name,10)];u.length===1&&!E&&(E=u[0][r.name]),E||(E={});const y=Object.keys(r.attrs).length!==0?ie({props:r.attrs},E):E,C=S(y),w=C&&B(r,!0)&&!r.voidElement,V=f&&F(y)&&y.dummy&&!C,M=F(e)&&Object.hasOwnProperty.call(e,r.name);if(I(y)){const $=t.services.interpolator.interpolate(y,g,t.language);m.push($)}else if(B(y)||w){const $=k(y,r,u);x(y,$,m,A)}else if(V){const $=c(b,r.children,u);x(y,$,m,A)}else if(Number.isNaN(parseFloat(r.name)))if(M){const $=k(y,r,u);x(y,$,m,A,r.voidElement)}else if(i.transSupportBasicHtmlNodes&&o.indexOf(r.name)>-1)if(r.voidElement)m.push(N(r.name,{key:`${r.name}-${A}`}));else{const $=c(b,r.children,u);m.push(N(r.name,{key:`${r.name}-${A}`},$))}else if(r.voidElement)m.push(`<${r.name} />`);else{const $=c(b,r.children,u);m.push(`<${r.name}>${$}</${r.name}>`)}else if(F(y)&&!C){const $=r.children[0]?j:null;$&&m.push($)}else x(y,j,m,A,r.children.length!==1||!j)}else if(r.type==="text"){const E=i.transWrapTextNodes,y=s?i.unescape(t.services.interpolator.interpolate(r.content,g,t.language)):t.services.interpolator.interpolate(r.content,g,t.language);E?m.push(N(E,{key:`${r.name}-${A}`},y)):m.push(y)}return m},[])},O=c([{dummy:!0,children:e||[]}],d,D(e||[]));return L(O[0])};function le({children:e,count:n,parent:t,i18nKey:i,context:h,tOptions:s={},values:o,defaults:f,components:l,ns:v,i18n:d,t:g,shouldUnescape:k,...x}){const c=d||K();if(!c)return G("You will need to pass in an i18next instance by using i18nextReactModule"),e;const O=g||c.t.bind(c)||(C=>C),a={...Q(),...c.options?.react};let p=v||O.ns||c.options?.defaultNS;p=I(p)?[p]:p||["translation"];const u=z(e,a),b=f||u||a.transEmptyNodeValue||i,{hashTransKey:T}=a,m=i||(T?T(u||b):u||b);c.options?.interpolation?.defaultVariables&&(o=o&&Object.keys(o).length>0?{...o,...c.options.interpolation.defaultVariables}:{...c.options.interpolation.defaultVariables});const r=o||n!==void 0&&!c.options?.interpolation?.alwaysFormat||!e?s.interpolation:{interpolation:{...s.interpolation,prefix:"#$?",suffix:"?$#"}},A={...s,context:h||s.context,count:n,...o,...r,defaultValue:b,ns:p},j=m?O(m,A):b;l&&Object.keys(l).forEach(C=>{const w=l[C];if(typeof w.type=="function"||!w.props||!w.props.children||j.indexOf(`${C}/>`)<0&&j.indexOf(`${C} />`)<0)return;function V(){return N(J,null,w)}l[C]=N(V)});const E=oe(l||e,j,c,a,A,k),y=t??a.defaultTransParent;return y?N(y,x,E):E}function pe({children:e,count:n,parent:t,i18nKey:i,context:h,tOptions:s={},values:o,defaults:f,components:l,ns:v,i18n:d,t:g,shouldUnescape:k,...x}){const{i18n:c,defaultNS:O}=Z(_)||{},a=d||c||K(),p=g||a?.t.bind(a);return le({children:e,count:n,parent:t,i18nKey:i,context:h,tOptions:s,values:o,defaults:f,components:l,ns:v||p?.ns||O||a?.options?.defaultNS,i18n:a,t:g,shouldUnescape:k,...x})}export{pe as T};
//# sourceMappingURL=Trans-C8a1WrTl.js.map
