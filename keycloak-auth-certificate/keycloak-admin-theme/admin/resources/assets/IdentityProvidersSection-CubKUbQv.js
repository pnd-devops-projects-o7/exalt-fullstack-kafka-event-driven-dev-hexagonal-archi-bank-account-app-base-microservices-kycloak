import{jsxs as l,Fragment as u,jsx as a}from"react/jsx-runtime";import{dv as U,dO as _,dP as Q,u as W,a as v,e as Y,d as b,b as Z,$ as q,C as J,B as w,p as X,ak as ee,P as ae,E as x,G as z,H as A,cv as te,Z as ie,_ as K,dQ as re,S as ne,T as y,cW as se,bl as de,ag as oe,bm as le,f as ce,cP as me,k as pe,L as B,dL as ge,cK as he,de as ue,dR as L,dS as ye,D as fe}from"./main-C047jAp3.js";import{useState as m,Fragment as ve}from"react";import{u as be}from"./ConfirmDialog-d09hGFUk.js";import{G as Ce,C as Pe}from"./ClickableCard-CQcJ5e9v.js";import{V as Ie}from"./ViewHeader-Y2Z8ln-o.js";import{M as ke}from"./ManageOrderDialog-922B-N3z.js";import{b as Oe,s as f}from"./sortBy-o2QtVcO3.js";import"react-dom";import"./Droppable-BCYJDQYz.js";import"./DataListItemRow-BUcm7LGX.js";function De(e,t,r,s){for(var d=-1,o=e==null?0:e.length;++d<o;){var c=e[d];t(s,c,r(c),e)}return s}function Se(e,t,r,s){return Oe(e,function(d,o,c){t(s,d,r(d),c)}),s}function we(e,t){return function(r,s){var d=_(r)?De:Se,o={};return d(r,e,U(s),o)}}var xe=Object.prototype,ze=xe.hasOwnProperty,Ae=we(function(e,t,r){ze.call(e,r)?e[r].push(t):Q(e,r,[t])});const Ke=e=>{const{t}=v(),{realm:r}=b();return l(B,{to:ge({realm:r,providerId:e.providerId,alias:e.alias,tab:"settings"}),children:[e.displayName||e.alias,!e.enabled&&a(he,{isRead:!0,className:"pf-v5-u-ml-sm",children:t("disabled")},`${e.providerId}-disabled`)]},e.providerId)},Le=e=>{const{t}=v(),{realm:r}=b();return e?.organizationId?a(B,{to:ue({realm:r,id:e.organizationId,tab:"identityProviders"}),children:t("organization")},e.providerId):"â€”"};function Me(){const{adminClient:e}=W(),{t}=v(),r=Ae(Y().identityProviders,"groupName"),{realm:s}=b(),d=Z(),[o,c]=m(0),p=()=>c(o+1),[h,C]=m(!1),[P,I]=m(!1),[T,k]=m(!1),[g,F]=m(!1),[O,R]=m(),{addAlert:V,addError:N}=q();J(async()=>e.identityProviders.find({max:1}),i=>{F(i.length===1)},[o]);const j=async(i,n,D)=>{const S={first:i,max:n,realmOnly:h};D&&(S.search=D);const M=await e.identityProviders.find(S);return f(M,"alias")},E=i=>d(L({realm:s,providerId:i})),G=()=>Object.keys(r).map(i=>a(ye,{label:i,children:f(r[i],"name").map(n=>a(fe,{value:n.id,component:"a","data-testid":n.id,onClick:()=>d(L({realm:s,providerId:n.id})),children:n.name},n.id))},i)),[$,H]=be({titleKey:"deleteProvider",messageKey:t("deleteConfirm",{provider:O?.alias}),continueButtonLabel:"delete",continueButtonVariant:w.danger,onConfirm:async()=>{try{await e.identityProviders.del({alias:O.alias}),p(),V(t("deletedSuccessIdentityProvider"),X.success)}catch(i){N("deleteErrorIdentityProvider",i)}}});return l(u,{children:[a(H,{}),T&&a(ke,{hideRealmBasedIdps:h,onClose:()=>{k(!1),p()}}),a(Ie,{titleKey:"identityProviders",subKey:"listExplain",helpUrl:ee.identityProvidersUrl}),l(ae,{variant:g?"light":"default",className:g?"pf-v5-u-p-0":"",children:[!g&&l(u,{children:[a(x,{children:a(z,{component:A.p,children:t("getStarted")})}),Object.keys(r).map(i=>l(ve,{children:[a(x,{children:l(z,{className:"pf-v5-u-mt-lg",component:A.h2,children:[i,":"]})}),a("hr",{className:"pf-v5-u-mb-lg"}),a(Ce,{hasGutter:!0,children:f(r[i],"name").map(n=>a(Pe,{"data-testid":`${n.id}-card`,onClick:()=>E(n.id),children:a(te,{children:l(ie,{hasGutter:!0,children:[a(K,{children:a(re,{icon:n.id})}),a(K,{isFilled:!0,children:n.name})]})})},n.id))})]},i))]}),g&&a(ne,{loader:j,isPaginated:!0,ariaLabelKey:"identityProviders",searchPlaceholderKey:"searchForProvider",toolbarItem:l(u,{children:[a(y,{alignSelf:"center",children:a(se,{label:t("hideOrganizationLinkedIdps"),id:"hideOrganizationLinkedIdps","data-testid":"hideOrganizationLinkedIdps",isChecked:h,onChange:(i,n)=>{C(n),p()}})}),a(y,{children:a(de,{"data-testid":"addProviderDropdown",onOpenChange:i=>I(i),toggle:i=>a(oe,{ref:i,onClick:()=>I(!P),variant:"primary",children:t("addProvider")}),isOpen:P,children:a(le,{children:G()})})}),a(y,{children:a(ce,{"data-testid":"manageDisplayOrder",variant:"link",onClick:()=>k(!0),children:t("manageDisplayOrder")})})]}),actions:[{title:t("delete"),onRowClick:i=>{R(i),$()}}],columns:[{name:"alias",displayKey:"name",cellRenderer:Ke},{name:"providerId",displayKey:"providerDetails",cellFormatters:[me()]},{name:"organizationId",displayKey:"linkedOrganization",cellRenderer:Le}],emptyState:a(pe,{message:t("identityProviders"),instructions:t("emptyRealmBasedIdps"),isSearchVariant:!0,secondaryActions:[{text:t("clearAllFilters"),onClick:()=>{C(!1),p()},type:w.link}]})},o)]})]})}export{Me as default};
//# sourceMappingURL=IdentityProvidersSection-CubKUbQv.js.map
