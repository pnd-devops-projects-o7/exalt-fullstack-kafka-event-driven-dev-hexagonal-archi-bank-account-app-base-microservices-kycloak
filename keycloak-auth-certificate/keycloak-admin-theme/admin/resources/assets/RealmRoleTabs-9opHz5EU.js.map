{"version":3,"file":"RealmRoleTabs-9opHz5EU.js","sources":["../../../../../../../src/realm-roles/UsersInRoleTab.tsx","../../../../../../../src/realm-roles/RealmRoleTabs.tsx"],"sourcesContent":["import { Button, PageSection, Popover } from \"@patternfly/react-core\";\nimport { QuestionCircleIcon } from \"@patternfly/react-icons\";\nimport { useTranslation } from \"react-i18next\";\nimport { useNavigate } from \"react-router-dom\";\nimport { useHelp } from \"@keycloak/keycloak-ui-shared\";\nimport { useAdminClient } from \"../admin-client\";\nimport type { ClientRoleParams } from \"../clients/routes/ClientRole\";\nimport { ListEmptyState } from \"@keycloak/keycloak-ui-shared\";\nimport { KeycloakDataTable } from \"@keycloak/keycloak-ui-shared\";\nimport { useRealm } from \"../context/realm-context/RealmContext\";\nimport { emptyFormatter, upperCaseFormatter } from \"../util\";\nimport { useParams } from \"../utils/useParams\";\n\nexport const UsersInRoleTab = () => {\n  const { adminClient } = useAdminClient();\n\n  const navigate = useNavigate();\n  const { realm } = useRealm();\n\n  const { t } = useTranslation();\n  const { id, clientId } = useParams<ClientRoleParams>();\n\n  const loader = async (first?: number, max?: number) => {\n    const role = await adminClient.roles.findOneById({ id: id });\n    if (!role) {\n      throw new Error(t(\"notFound\"));\n    }\n\n    if (role.clientRole) {\n      return adminClient.clients.findUsersWithRole({\n        roleName: role.name!,\n        id: clientId,\n        briefRepresentation: true,\n        first,\n        max,\n      });\n    }\n\n    return adminClient.roles.findUsersWithRole({\n      name: role.name!,\n      briefRepresentation: true,\n      first,\n      max,\n    });\n  };\n\n  const { enabled } = useHelp();\n\n  return (\n    <PageSection data-testid=\"users-page\" variant=\"light\">\n      <KeycloakDataTable\n        isPaginated\n        loader={loader}\n        ariaLabelKey=\"roleList\"\n        searchPlaceholderKey=\"\"\n        data-testid=\"users-in-role-table\"\n        toolbarItem={\n          enabled && (\n            <Popover\n              aria-label=\"Basic popover\"\n              position=\"bottom\"\n              bodyContent={\n                <div>\n                  {t(\"whoWillAppearPopoverTextRoles\")}\n                  <Button\n                    className=\"kc-groups-link\"\n                    variant=\"link\"\n                    onClick={() => navigate(`/${realm}/groups`)}\n                  >\n                    {t(\"groups\")}\n                  </Button>\n                  {t(\"or\")}\n                  <Button\n                    className=\"kc-users-link\"\n                    variant=\"link\"\n                    onClick={() => navigate(`/${realm}/users`)}\n                  >\n                    {t(\"users\")}.\n                  </Button>\n                </div>\n              }\n              footerContent={t(\"whoWillAppearPopoverFooterText\")}\n            >\n              <Button\n                variant=\"link\"\n                className=\"kc-who-will-appear-button\"\n                key=\"who-will-appear-button\"\n                icon={<QuestionCircleIcon />}\n              >\n                {t(\"whoWillAppearLinkTextRoles\")}\n              </Button>\n            </Popover>\n          )\n        }\n        emptyState={\n          <ListEmptyState\n            hasIcon={true}\n            message={t(\"noDirectUsers\")}\n            instructions={\n              <div>\n                {t(\"noUsersEmptyStateDescription\")}\n                <Button\n                  className=\"kc-groups-link-empty-state\"\n                  variant=\"link\"\n                  onClick={() => navigate(`/${realm}/groups`)}\n                >\n                  {t(\"groups\")}\n                </Button>\n                {t(\"or\")}\n                <Button\n                  className=\"kc-users-link-empty-state\"\n                  variant=\"link\"\n                  onClick={() => navigate(`/${realm}/users`)}\n                >\n                  {t(\"users\")}\n                </Button>\n                {t(\"noUsersEmptyStateDescriptionContinued\")}\n              </div>\n            }\n          />\n        }\n        columns={[\n          {\n            name: \"username\",\n            displayKey: \"userName\",\n            cellFormatters: [emptyFormatter()],\n          },\n          {\n            name: \"email\",\n            displayKey: \"email\",\n            cellFormatters: [emptyFormatter()],\n          },\n          {\n            name: \"lastName\",\n            displayKey: \"lastName\",\n            cellFormatters: [emptyFormatter()],\n          },\n          {\n            name: \"firstName\",\n            displayKey: \"firstName\",\n            cellFormatters: [upperCaseFormatter(), emptyFormatter()],\n          },\n        ]}\n      />\n    </PageSection>\n  );\n};\n","import type RoleRepresentation from \"@keycloak/keycloak-admin-client/lib/defs/roleRepresentation\";\nimport { useAlerts, useFetch } from \"@keycloak/keycloak-ui-shared\";\nimport {\n  AlertVariant,\n  ButtonVariant,\n  DropdownItem,\n  PageSection,\n  Tab,\n  TabTitleText,\n} from \"@patternfly/react-core\";\nimport { useState } from \"react\";\nimport {\n  FormProvider,\n  SubmitHandler,\n  useForm,\n  useWatch,\n} from \"react-hook-form\";\nimport { useTranslation } from \"react-i18next\";\nimport { useMatch, useNavigate } from \"react-router-dom\";\nimport { useAdminClient } from \"../admin-client\";\nimport { toClient } from \"../clients/routes/Client\";\nimport {\n  ClientRoleParams,\n  ClientRoleRoute,\n  ClientRoleTab,\n  toClientRole,\n} from \"../clients/routes/ClientRole\";\nimport { useConfirmDialog } from \"../components/confirm-dialog/ConfirmDialog\";\nimport {\n  AttributeForm,\n  AttributesForm,\n} from \"../components/key-value-form/AttributeForm\";\nimport {\n  KeyValueType,\n  arrayToKeyValue,\n  keyValueToArray,\n} from \"../components/key-value-form/key-value-convert\";\nimport { KeycloakSpinner } from \"@keycloak/keycloak-ui-shared\";\nimport { PermissionsTab } from \"../components/permission-tab/PermissionTab\";\nimport { RoleForm } from \"../components/role-form/RoleForm\";\nimport { AddRoleMappingModal } from \"../components/role-mapping/AddRoleMappingModal\";\nimport { RoleMapping } from \"../components/role-mapping/RoleMapping\";\nimport {\n  RoutableTabs,\n  useRoutableTab,\n} from \"../components/routable-tabs/RoutableTabs\";\nimport { ViewHeader } from \"../components/view-header/ViewHeader\";\nimport { useAccess } from \"../context/access/Access\";\nimport { useRealm } from \"../context/realm-context/RealmContext\";\nimport useIsFeatureEnabled, { Feature } from \"../utils/useIsFeatureEnabled\";\nimport { useParams } from \"../utils/useParams\";\nimport { UsersInRoleTab } from \"./UsersInRoleTab\";\nimport { RealmRoleRoute, RealmRoleTab, toRealmRole } from \"./routes/RealmRole\";\nimport { toRealmRoles } from \"./routes/RealmRoles\";\n\nexport default function RealmRoleTabs() {\n  const { adminClient } = useAdminClient();\n\n  const isFeatureEnabled = useIsFeatureEnabled();\n  const { t } = useTranslation();\n  const form = useForm<AttributeForm>({\n    mode: \"onChange\",\n  });\n  const { control, reset, setValue } = form;\n  const navigate = useNavigate();\n\n  const { id, clientId } = useParams<ClientRoleParams>();\n  const { realm: realmName, realmRepresentation: realm } = useRealm();\n  const [key, setKey] = useState(0);\n  const [attributes, setAttributes] = useState<KeyValueType[] | undefined>();\n\n  const refresh = () => setKey(key + 1);\n\n  const { addAlert, addError } = useAlerts();\n\n  const { hasAccess } = useAccess();\n  const canViewPermissionsTab = hasAccess(\n    \"query-clients\",\n    \"manage-authorization\",\n  );\n\n  const [canManageClientRole, setCanManageClientRole] = useState(false);\n\n  const [open, setOpen] = useState(false);\n  const convert = (role: RoleRepresentation) => {\n    const { attributes, ...rest } = role;\n    return {\n      attributes: arrayToKeyValue(attributes),\n      ...rest,\n    };\n  };\n\n  const roleName = useWatch({\n    control,\n    defaultValue: undefined,\n    name: \"name\",\n  });\n\n  const composites = useWatch({\n    control,\n    defaultValue: false,\n    name: \"composite\",\n  });\n\n  useFetch(\n    async () => adminClient.roles.findOneById({ id }),\n    (role) => {\n      if (!role) {\n        throw new Error(t(\"notFound\"));\n      }\n\n      const convertedRole = convert(role);\n\n      reset(convertedRole);\n      setAttributes(convertedRole.attributes);\n    },\n    [key],\n  );\n\n  useFetch(\n    async () => adminClient.clients.findOne({ id: clientId }),\n    (client) => {\n      if (clientId) setCanManageClientRole(client?.access?.manage as boolean);\n    },\n    [],\n  );\n\n  const onSubmit: SubmitHandler<AttributeForm> = async (formValues) => {\n    try {\n      const { attributes, ...rest } = formValues;\n      const roleRepresentation: RoleRepresentation = rest;\n\n      roleRepresentation.name = roleRepresentation.name?.trim();\n      roleRepresentation.attributes = keyValueToArray(attributes);\n\n      if (!clientId) {\n        await adminClient.roles.updateById({ id }, roleRepresentation);\n      } else {\n        await adminClient.clients.updateRole(\n          { id: clientId, roleName: formValues.name! },\n          roleRepresentation,\n        );\n      }\n\n      setAttributes(attributes);\n      addAlert(t(\"roleSaveSuccess\"), AlertVariant.success);\n    } catch (error) {\n      addError(\"roleSaveError\", error);\n    }\n  };\n\n  const realmRoleMatch = useMatch(RealmRoleRoute.path);\n  const clientRoleMatch = useMatch(ClientRoleRoute.path);\n\n  const toOverview = () => {\n    if (realmRoleMatch) {\n      return toRealmRoles({ realm: realmName });\n    }\n\n    if (clientRoleMatch) {\n      return toClient({\n        realm: realmName,\n        clientId: clientRoleMatch.params.clientId!,\n        tab: \"roles\",\n      });\n    }\n\n    throw new Error(\"Roles overview route could not be determined.\");\n  };\n\n  const toTab = (tab: RealmRoleTab | ClientRoleTab) => {\n    if (realmRoleMatch) {\n      return toRealmRole({\n        realm: realmName,\n        id,\n        tab,\n      });\n    }\n\n    if (clientRoleMatch) {\n      return toClientRole({\n        realm: realmName,\n        id,\n        clientId: clientRoleMatch.params.clientId!,\n        tab: tab as ClientRoleTab,\n      });\n    }\n\n    throw new Error(\"Route could not be determined.\");\n  };\n\n  const useTab = (tab: RealmRoleTab | ClientRoleTab) =>\n    useRoutableTab(toTab(tab));\n\n  const detailsTab = useTab(\"details\");\n  const associatedRolesTab = useTab(\"associated-roles\");\n  const attributesTab = useTab(\"attributes\");\n  const usersInRoleTab = useTab(\"users-in-role\");\n  const permissionsTab = useTab(\"permissions\");\n\n  const [toggleDeleteDialog, DeleteConfirm] = useConfirmDialog({\n    titleKey: \"roleDeleteConfirm\",\n    messageKey: t(\"roleDeleteConfirmDialog\", {\n      selectedRoleName: roleName || t(\"createRole\"),\n    }),\n    continueButtonLabel: \"delete\",\n    continueButtonVariant: ButtonVariant.danger,\n    onConfirm: async () => {\n      try {\n        if (!clientId) {\n          await adminClient.roles.delById({ id });\n        } else {\n          await adminClient.clients.delRole({\n            id: clientId,\n            roleName: roleName!,\n          });\n        }\n        addAlert(t(\"roleDeletedSuccess\"), AlertVariant.success);\n        navigate(toOverview());\n      } catch (error) {\n        addError(\"roleDeleteError\", error);\n      }\n    },\n  });\n\n  const addComposites = async (composites: RoleRepresentation[]) => {\n    try {\n      await adminClient.roles.createComposite(\n        { roleId: id, realm: realm!.realm },\n        composites,\n      );\n      refresh();\n      navigate(toTab(\"associated-roles\"));\n      addAlert(t(\"addAssociatedRolesSuccess\"), AlertVariant.success);\n    } catch (error) {\n      addError(\"addAssociatedRolesError\", error);\n    }\n  };\n\n  const isDefaultRole = (name: string | undefined) =>\n    realm?.defaultRole && realm.defaultRole!.name === name;\n\n  if (!realm) {\n    return <KeycloakSpinner />;\n  }\n\n  return (\n    <>\n      <DeleteConfirm />\n      {open && (\n        <AddRoleMappingModal\n          id={id}\n          type=\"roles\"\n          name={roleName}\n          onAssign={(rows) => addComposites(rows.map((r) => r.role))}\n          onClose={() => setOpen(false)}\n        />\n      )}\n      <ViewHeader\n        titleKey={roleName!}\n        badges={[\n          {\n            id: \"composite-role-badge\",\n            text: composites ? t(\"composite\") : \"\",\n            readonly: true,\n          },\n        ]}\n        actionsDropdownId=\"roles-actions-dropdown\"\n        dropdownItems={[\n          <DropdownItem\n            key=\"delete-role\"\n            component=\"button\"\n            onClick={() => {\n              toggleDeleteDialog();\n            }}\n          >\n            {t(\"deleteRole\")}\n          </DropdownItem>,\n        ]}\n        divider={false}\n      />\n      <PageSection variant=\"light\" className=\"pf-v5-u-p-0\">\n        <FormProvider {...form}>\n          <RoutableTabs isBox mountOnEnter defaultLocation={toTab(\"details\")}>\n            <Tab\n              title={<TabTitleText>{t(\"details\")}</TabTitleText>}\n              {...detailsTab}\n            >\n              <RoleForm\n                form={form}\n                onSubmit={onSubmit}\n                role={clientRoleMatch ? \"manage-clients\" : \"manage-realm\"}\n                cancelLink={\n                  clientRoleMatch\n                    ? toClient({ realm: realmName, clientId, tab: \"roles\" })\n                    : toRealmRoles({ realm: realmName })\n                }\n                editMode\n              />\n            </Tab>\n            <Tab\n              data-testid=\"associatedRolesTab\"\n              title={<TabTitleText>{t(\"associatedRolesText\")}</TabTitleText>}\n              {...associatedRolesTab}\n            >\n              <RoleMapping\n                name={roleName!}\n                id={id}\n                type=\"roles\"\n                isManager\n                save={(rows) => addComposites(rows.map((r) => r.role))}\n              />\n            </Tab>\n            {!isDefaultRole(roleName) && (\n              <Tab\n                data-testid=\"attributesTab\"\n                className=\"kc-attributes-tab\"\n                title={<TabTitleText>{t(\"attributes\")}</TabTitleText>}\n                {...attributesTab}\n              >\n                <AttributesForm\n                  form={form}\n                  save={onSubmit}\n                  fineGrainedAccess={canManageClientRole}\n                  reset={() =>\n                    setValue(\"attributes\", attributes, { shouldDirty: false })\n                  }\n                />\n              </Tab>\n            )}\n            {!isDefaultRole(roleName) && (\n              <Tab\n                title={<TabTitleText>{t(\"usersInRole\")}</TabTitleText>}\n                {...usersInRoleTab}\n              >\n                <UsersInRoleTab data-cy=\"users-in-role-tab\" />\n              </Tab>\n            )}\n            {isFeatureEnabled(Feature.AdminFineGrainedAuthz) &&\n              canViewPermissionsTab && (\n                <Tab\n                  title={<TabTitleText>{t(\"permissions\")}</TabTitleText>}\n                  {...permissionsTab}\n                >\n                  <PermissionsTab id={id} type=\"roles\" />\n                </Tab>\n              )}\n          </RoutableTabs>\n        </FormProvider>\n      </PageSection>\n    </>\n  );\n}\n"],"names":["UsersInRoleTab","adminClient","useAdminClient","navigate","useNavigate","realm","useRealm","t","useTranslation","id","clientId","useParams","loader","first","max","role","enabled","useHelp","jsx","PageSection","KeycloakDataTable","Popover","Button","jsxs","QuestionCircleIcon","ListEmptyState","emptyFormatter","upperCaseFormatter","RealmRoleTabs","isFeatureEnabled","useIsFeatureEnabled","form","useForm","control","reset","setValue","realmName","key","setKey","useState","attributes","setAttributes","refresh","addAlert","addError","useAlerts","hasAccess","useAccess","canViewPermissionsTab","canManageClientRole","setCanManageClientRole","open","setOpen","convert","rest","arrayToKeyValue","roleName","useWatch","composites","useFetch","convertedRole","client","onSubmit","formValues","roleRepresentation","keyValueToArray","AlertVariant","error","realmRoleMatch","useMatch","RealmRoleRoute","clientRoleMatch","ClientRoleRoute","toOverview","toRealmRoles","toClient","toTab","tab","toRealmRole","toClientRole","useTab","useRoutableTab","detailsTab","associatedRolesTab","attributesTab","usersInRoleTab","permissionsTab","toggleDeleteDialog","DeleteConfirm","useConfirmDialog","ButtonVariant","addComposites","isDefaultRole","name","Fragment","AddRoleMappingModal","rows","r","ViewHeader","DropdownItem","FormProvider","RoutableTabs","Tab","TabTitleText","RoleForm","RoleMapping","AttributesForm","Feature","PermissionsTab","KeycloakSpinner"],"mappings":"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"}