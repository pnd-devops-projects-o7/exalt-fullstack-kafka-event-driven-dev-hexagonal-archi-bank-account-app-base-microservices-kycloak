{"version":3,"file":"OrganizationForm-CiZy-_uG.js","sources":["../../../../../../../src/organizations/OrganizationForm.tsx"],"sourcesContent":["import OrganizationRepresentation from \"@keycloak/keycloak-admin-client/lib/defs/organizationRepresentation\";\nimport {\n  FormErrorText,\n  HelpItem,\n  TextAreaControl,\n  TextControl,\n} from \"@keycloak/keycloak-ui-shared\";\nimport { FormGroup } from \"@patternfly/react-core\";\nimport { useEffect } from \"react\";\nimport { useFormContext, useWatch } from \"react-hook-form\";\nimport { useTranslation } from \"react-i18next\";\nimport { AttributeForm } from \"../components/key-value-form/AttributeForm\";\nimport { keyValueToArray } from \"../components/key-value-form/key-value-convert\";\nimport { MultiLineInput } from \"../components/multi-line-input/MultiLineInput\";\n\nexport type OrganizationFormType = AttributeForm &\n  Omit<OrganizationRepresentation, \"domains\" | \"attributes\"> & {\n    domains?: string[];\n  };\n\nexport const convertToOrg = (\n  org: OrganizationFormType,\n): OrganizationRepresentation => ({\n  ...org,\n  domains: org.domains?.map((d) => ({ name: d, verified: false })),\n  attributes: keyValueToArray(org.attributes),\n});\n\ntype OrganizationFormProps = {\n  readOnly?: boolean;\n};\n\nexport const OrganizationForm = ({\n  readOnly = false,\n}: OrganizationFormProps) => {\n  const { t } = useTranslation();\n  const {\n    setValue,\n    formState: { errors },\n  } = useFormContext();\n  const name = useWatch({ name: \"name\" });\n\n  useEffect(() => {\n    if (!readOnly) {\n      setValue(\"alias\", name);\n    }\n  }, [name, readOnly]);\n\n  return (\n    <>\n      <TextControl\n        label={t(\"name\")}\n        name=\"name\"\n        rules={{ required: t(\"required\") }}\n      />\n      <TextControl\n        label={t(\"alias\")}\n        name=\"alias\"\n        labelIcon={t(\"organizationAliasHelp\")}\n        isDisabled={readOnly}\n      />\n      <FormGroup\n        label={t(\"domain\")}\n        fieldId=\"domain\"\n        labelIcon={\n          <HelpItem\n            helpText={t(\"organizationDomainHelp\")}\n            fieldLabelId=\"domain\"\n          />\n        }\n        isRequired\n      >\n        <MultiLineInput\n          id=\"domain\"\n          name=\"domains\"\n          aria-label={t(\"domain\")}\n          addButtonLabel=\"addDomain\"\n          isRequired\n        />\n        {errors?.[\"domains\"]?.message && (\n          <FormErrorText message={errors[\"domains\"].message.toString()} />\n        )}\n      </FormGroup>\n      <TextControl\n        label={t(\"redirectUrl\")}\n        name=\"redirectUrl\"\n        labelIcon={t(\"organizationRedirectUrlHelp\")}\n      />\n      <TextAreaControl name=\"description\" label={t(\"description\")} />\n    </>\n  );\n};\n"],"names":["convertToOrg","org","d","keyValueToArray","OrganizationForm","readOnly","t","useTranslation","setValue","errors","useFormContext","name","useWatch","useEffect","jsxs","Fragment","jsx","TextControl","FormGroup","HelpItem","MultiLineInput","FormErrorText","TextAreaControl"],"mappings":"qPAoBa,MAAAA,EACXC,IACgC,CAChC,GAAGA,EACH,QAASA,EAAI,SAAS,IAAKC,IAAO,CAAE,KAAMA,EAAG,SAAU,EAAQ,EAAA,EAC/D,WAAYC,EAAgBF,EAAI,UAAU,CAC5C,GAMaG,EAAmB,CAAC,CAC/B,SAAAC,EAAW,EACb,IAA6B,CACrB,KAAA,CAAE,EAAAC,GAAMC,IACR,CACJ,SAAAC,EACA,UAAW,CAAE,OAAAC,CAAO,GAClBC,EAAe,EACbC,EAAOC,EAAS,CAAE,KAAM,MAAQ,CAAA,EAEtC,OAAAC,EAAU,IAAM,CACTR,GACHG,EAAS,QAASG,CAAI,CACxB,EACC,CAACA,EAAMN,CAAQ,CAAC,EAIfS,EAAAC,EAAA,CAAA,SAAA,CAAAC,EAACC,EAAA,CACC,MAAOX,EAAE,MAAM,EACf,KAAK,OACL,MAAO,CAAE,SAAUA,EAAE,UAAU,CAAE,CAAA,CACnC,EACAU,EAACC,EAAA,CACC,MAAOX,EAAE,OAAO,EAChB,KAAK,QACL,UAAWA,EAAE,uBAAuB,EACpC,WAAYD,CAAA,CACd,EACAS,EAACI,EAAA,CACC,MAAOZ,EAAE,QAAQ,EACjB,QAAQ,SACR,UACEU,EAACG,EAAA,CACC,SAAUb,EAAE,wBAAwB,EACpC,aAAa,QAAA,CACf,EAEF,WAAU,GAEV,SAAA,CAAAU,EAACI,EAAA,CACC,GAAG,SACH,KAAK,UACL,aAAYd,EAAE,QAAQ,EACtB,eAAe,YACf,WAAU,EAAA,CACZ,EACCG,GAAS,SAAY,SACnBO,EAAAK,EAAA,CAAc,QAASZ,EAAO,QAAW,QAAQ,SAAY,CAAA,CAAA,CAAA,CAAA,CAElE,EACAO,EAACC,EAAA,CACC,MAAOX,EAAE,aAAa,EACtB,KAAK,cACL,UAAWA,EAAE,6BAA6B,CAAA,CAC5C,IACCgB,EAAgB,CAAA,KAAK,cAAc,MAAOhB,EAAE,aAAa,EAAG,CAC/D,CAAA,CAAA,CAEJ"}