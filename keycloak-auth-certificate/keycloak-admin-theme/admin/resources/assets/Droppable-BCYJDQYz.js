import{aq as S,ar as C,es as se}from"./main-C047jAp3.js";import*as s from"react";import{s as B}from"./DataListItemRow-BUcm7LGX.js";const re=e=>{var{children:t,className:a=""}=e,n=S(e,["children","className"]);return s.createElement("div",Object.assign({className:C(B.dataListItemControl,a)},n),t)};re.displayName="DataListControl";const oe=e=>{var{className:t="",isDisabled:a=!1}=e,n=S(e,["className","isDisabled"]);return s.createElement("button",Object.assign({className:C(B.dataListItemDraggableButton,a&&B.modifiers.disabled,t),type:"button",disabled:a},n),s.createElement("span",{className:C(B.dataListItemDraggableIcon)},s.createElement(se,null)))};oe.displayName="DataListDragButton";const H=s.createContext({onDrag:e=>!0,onDragMove:(e,t)=>{},onDrop:(e,t)=>!1}),ne=({children:e,onDrag:t=()=>!0,onDragMove:a=()=>{},onDrop:n=()=>!1})=>s.createElement(H.Provider,{value:{onDrag:t,onDragMove:a,onDrop:n}},e);ne.displayName="DragDrop";const u={draggable:"pf-v5-c-draggable",droppable:"pf-v5-c-droppable",modifiers:{dragging:"pf-m-dragging",dragOutside:"pf-m-drag-outside"},themeDark:"pf-v5-theme-dark"},T=s.createContext({zone:"defaultDroppableZone",droppableId:"defaultDroppableId"}),ie={name:"--pf-v5-c-draggable--m-dragging--BackgroundColor",value:"#fff",var:"var(--pf-v5-c-draggable--m-dragging--BackgroundColor)"};function le(){const e=document.createElement("div");document.head.appendChild(e);const t=window.getComputedStyle(e).backgroundColor;return document.head.removeChild(e),t}function U(e){const t=le(),a=window.getComputedStyle(e).backgroundColor;return a!==t?a:e.parentElement?U(e.parentElement):t}function de(e){if(e.getAttribute("blankDiv")==="true")for(let t=0;t<e.children.length;t++){const a=e.children[t];if(a.getAttribute("blankDiv")==="true"){e.removeChild(a),e.setAttribute("blankDiv","false");break}}}function M(e){de(e.node),e.node.classList.remove(u.modifiers.dragging),e.node.classList.remove(u.modifiers.dragOutside),e.draggableNodes.forEach((t,a)=>{t.style.transform="",t.style.transition="",e.draggableNodesRects[a]=t.getBoundingClientRect()})}function ge(e,t){return e.clientX>t.x&&e.clientX<t.x+t.width&&e.clientY>t.y&&e.clientY<t.y+t.height}const ce=e=>{var{className:t,children:a,style:n={},hasNoWrapper:L=!1}=e,x=S(e,["className","children","style","hasNoWrapper"]);let[h,D]=s.useState(n);const[O,w]=s.useState(!1),[Z,F]=s.useState(!0),{zone:A,droppableId:z}=s.useContext(T),{onDrag:G,onDragMove:J,onDrop:K}=s.useContext(H);let P=0,E=0,Y=null,y,_=null,$,I,j=0;const Q=o=>{O&&(w(!1),D(n))};function W(){const o=y?y.getAttribute("data-pf-droppableid"):null;return{source:{droppableId:z,index:Y},dest:o!==null?{droppableId:o,index:_}:void 0,hoveringDroppableId:o}}const ee=o=>{o.forEach(M),document.removeEventListener("mousemove",$),document.removeEventListener("mouseup",I),document.removeEventListener("contextmenu",I);const{source:d,dest:r,hoveringDroppableId:k}=W(),v=K(d,r);v&&z===k?(w(!1),D(n)):v||D(Object.assign(Object.assign({},h),{transition:"transform 0.5s cubic-bezier(0.2, 1, 0.1, 1) 0s",transform:"",background:n.background,boxShadow:n.boxShadow}))},te=(o,d,r)=>{if(y=null,d.forEach(g=>{const{node:i,rect:m,isDraggingHost:b,draggableNodes:f,draggableNodesRects:c}=g;if(ge(o,m)){if(i.classList.remove(u.modifiers.dragOutside),y=i,i.getAttribute("blankDiv")!=="true"&&!b){const p=document.createElement("div");p.setAttribute("blankDiv","true");let l=-1;for(let N=0;N<f.length;N++){const R=c[N],q=N===f.length-1,V=R.y>=E-j;(V||q)&&l===-1&&(q&&!V?f[N].after(p):f[N].before(p),p.style.height=`${r.height}px`,p.style.width=`${r.width}px`,i.setAttribute("blankDiv","true"),l=N),l!==-1&&(R.y+=r.height)}f.splice(l,0,p),c.splice(l,0,r),m.height+=r.height}}else M(g),i.classList.add(u.modifiers.dragging),i.classList.add(u.modifiers.dragOutside)}),D(Object.assign(Object.assign({},h),{transform:`translate(${o.pageX-P}px, ${o.pageY-E}px)`})),F(!!y),_=null,y){const{draggableNodes:g,draggableNodesRects:i}=d.find(b=>b.node===y);let m=0;g.forEach((b,f)=>{b.style.transition="transform 0.5s cubic-bezier(0.2, 1, 0.1, 1) 0s";const c=i[f],p=c.y+c.height/2;let l=0;E<p&&o.pageY+(r.height-j)>p?l-=r.height:E>=p&&o.pageY-j<=p&&(l+=r.height),(l<=m&&l<0||l>m&&l>0)&&(_=f),b.style.transform=`translate(0, ${l}px`,m=l})}const{source:k,dest:v}=W();J(k,v)},ae=o=>{if(o.preventDefault(),O)return;const d=o.target,r=d.getBoundingClientRect(),v=Array.from(document.querySelectorAll(`[data-pf-droppable="${A}"]`)).reduce((g,i)=>{i.classList.add(u.modifiers.dragging);const m=Array.from(i.querySelectorAll(`[data-pf-draggable-zone="${A}"]`)),b=i.contains(d);b&&(Y=m.indexOf(d));const f={node:i,rect:i.getBoundingClientRect(),isDraggingHost:b,draggableNodes:m.map(c=>c===d?c.cloneNode(!1):c),draggableNodesRects:m.map(c=>c.getBoundingClientRect())};return g.push(f),g},[]);if(!G({droppableId:z,index:Y})){v.forEach(g=>M(g));return}h=Object.assign(Object.assign({},h),{top:r.y,left:r.x,width:r.width,height:r.height,[ie.name]:U(d),position:"fixed",zIndex:5e3}),D(h),P=o.pageX,E=o.pageY,j=E-r.y,w(!0),$=g=>te(g,v,r),I=()=>ee(v),document.addEventListener("mousemove",$),document.addEventListener("mouseup",I)},X=Object.assign({"data-pf-draggable-zone":O?null:A,draggable:!0,className:C(u.draggable,O&&u.modifiers.dragging,!Z&&u.modifiers.dragOutside,t),onDragStart:ae,onTransitionEnd:Q,style:h},x);return s.createElement(s.Fragment,null,O&&s.createElement("div",Object.assign({draggable:!0},x,{style:Object.assign(Object.assign({},n),{visibility:"hidden"})}),a),L?s.cloneElement(a,X):s.createElement("div",Object.assign({},X),a))};ce.displayName="Draggable";const pe=e=>{var{className:t,children:a,zone:n="defaultZone",droppableId:L="defaultId",hasNoWrapper:x=!1}=e,h=S(e,["className","children","zone","droppableId","hasNoWrapper"]);const D=Object.assign({"data-pf-droppable":n,"data-pf-droppableid":L,className:x&&s.Children.count(a)===1?C(u.droppable,t,a.props.className):C(u.droppable,t)},h);return s.createElement(T.Provider,{value:{zone:n,droppableId:L}},x?s.cloneElement(a,D):s.createElement("div",Object.assign({},D),a))};pe.displayName="Droppable";export{oe as D,ce as a,re as b,ne as c,pe as d};
//# sourceMappingURL=Droppable-BCYJDQYz.js.map
